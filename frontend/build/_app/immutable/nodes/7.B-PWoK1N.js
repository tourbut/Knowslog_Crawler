import{s as re,e as R,i as I,n as ae,d as h,x as he,y as Be,w as ue,z as ge,A as Q,L as ee,M as te,f as M,h as v,N as ce,j as y,r as j,K as Le,t as q,g as G,k as U,l as J,a as H,m as W,b as V,o as K,u as Se,p as X,G as Ne,a0 as Pe,a1 as ze,H as $e,Z as Te,v as He,q as Ae}from"../chunks/scheduler.ts2GzjNa.js";import{S as ne,i as ie,b as x,c as z,a as $,m as A,t as D,d as T,e as Z,g as fe,f as _e}from"../chunks/index.nwS6sPbX.js";import{e as de}from"../chunks/each.l-xqNSP_.js";import{D as Ze,C as We,a as Ke}from"../chunks/ChevronDownOutline.CS30L2Nh.js";import{N as Oe,a as je,b as qe,c as Ge}from"../chunks/NavUl.C9ds_sVR.js";import{T as Ue}from"../chunks/Popper.DDrnCS9S.js";import{T as Fe,m as pe,S as Je}from"../chunks/Sidebar.B3fyy8wl.js";import{t as me,g as Ve,f as se,a as F}from"../chunks/fastapi.Dd1P6OQA.js";import{C as Re}from"../chunks/Combo_Modal.Bc5loxty.js";function Ye(r){let e,s,a,n,l,t=r[4].id&&r[4].title&&be(r),i=r[6].id&&r[6].desc&&ve(r),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=me("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":l=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let o=0;o<u.length;o+=1)f=ue(f,u[o]);return{c(){e=ee("svg"),t&&t.c(),s=R(),i&&i.c(),a=ee("path"),this.h()},l(o){e=te(o,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=M(e);t&&t.l(_),s=R(),i&&i.l(_),a=te(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),M(a).forEach(h),_.forEach(h),this.h()},h(){v(a,"stroke","currentColor"),v(a,"stroke-linecap","round"),v(a,"stroke-linejoin","round"),v(a,"stroke-width",r[5]),v(a,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),ce(e,f)},m(o,_){I(o,e,_),t&&t.m(e,null),y(e,s),i&&i.m(e,null),y(e,a)},p(o,_){o[4].id&&o[4].title?t?t.p(o,_):(t=be(o),t.c(),t.m(e,s)):t&&(t.d(1),t=null),o[6].id&&o[6].desc?i?i.p(o,_):(i=ve(o),i.c(),i.m(e,a)):i&&(i.d(1),i=null),_&32&&v(a,"stroke-width",o[5]),ce(e,f=Ve(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:o[2]},_&2048&&o[11],_&4097&&n!==(n=me("shrink-0",o[9][o[0]??"md"],o[12].class))&&{class:n},_&2&&{role:o[1]},_&128&&{"aria-label":o[7]},_&256&&l!==(l=o[8]?o[10]:void 0)&&{"aria-describedby":l},{viewBox:"0 0 24 24"}]))},d(o){o&&h(e),t&&t.d(),i&&i.d()}}}function Qe(r){let e,s,a,n,l,t,i,u=r[4].id&&r[4].title&&ke(r),f=r[6].id&&r[6].desc&&we(r),o=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=me("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":l=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let d=0;d<o.length;d+=1)_=ue(_,o[d]);return{c(){e=ee("svg"),u&&u.c(),s=R(),f&&f.c(),a=ee("path"),this.h()},l(d){e=te(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var g=M(e);u&&u.l(g),s=R(),f&&f.l(g),a=te(g,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),M(a).forEach(h),g.forEach(h),this.h()},h(){v(a,"stroke","currentColor"),v(a,"stroke-linecap","round"),v(a,"stroke-linejoin","round"),v(a,"stroke-width",r[5]),v(a,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),ce(e,_)},m(d,g){I(d,e,g),u&&u.m(e,null),y(e,s),f&&f.m(e,null),y(e,a),t||(i=[j(e,"click",r[13]),j(e,"keydown",r[14]),j(e,"keyup",r[15]),j(e,"focus",r[16]),j(e,"blur",r[17]),j(e,"mouseenter",r[18]),j(e,"mouseleave",r[19]),j(e,"mouseover",r[20]),j(e,"mouseout",r[21])],t=!0)},p(d,g){d[4].id&&d[4].title?u?u.p(d,g):(u=ke(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null),d[6].id&&d[6].desc?f?f.p(d,g):(f=we(d),f.c(),f.m(e,a)):f&&(f.d(1),f=null),g&32&&v(a,"stroke-width",d[5]),ce(e,_=Ve(o,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},g&4&&{color:d[2]},g&2048&&d[11],g&4097&&n!==(n=me("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:n},g&2&&{role:d[1]},g&128&&{"aria-label":d[7]},g&256&&l!==(l=d[8]?d[10]:void 0)&&{"aria-describedby":l},{viewBox:"0 0 24 24"}]))},d(d){d&&h(e),u&&u.d(),f&&f.d(),t=!1,Le(i)}}}function be(r){let e,s=r[4].title+"",a,n;return{c(){e=ee("title"),a=q(s),this.h()},l(l){e=te(l,"title",{id:!0});var t=M(e);a=G(t,s),t.forEach(h),this.h()},h(){v(e,"id",n=r[4].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&16&&s!==(s=l[4].title+"")&&U(a,s),t&16&&n!==(n=l[4].id)&&v(e,"id",n)},d(l){l&&h(e)}}}function ve(r){let e,s=r[6].desc+"",a,n;return{c(){e=ee("desc"),a=q(s),this.h()},l(l){e=te(l,"desc",{id:!0});var t=M(e);a=G(t,s),t.forEach(h),this.h()},h(){v(e,"id",n=r[6].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&64&&s!==(s=l[6].desc+"")&&U(a,s),t&64&&n!==(n=l[6].id)&&v(e,"id",n)},d(l){l&&h(e)}}}function ke(r){let e,s=r[4].title+"",a,n;return{c(){e=ee("title"),a=q(s),this.h()},l(l){e=te(l,"title",{id:!0});var t=M(e);a=G(t,s),t.forEach(h),this.h()},h(){v(e,"id",n=r[4].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&16&&s!==(s=l[4].title+"")&&U(a,s),t&16&&n!==(n=l[4].id)&&v(e,"id",n)},d(l){l&&h(e)}}}function we(r){let e,s=r[6].desc+"",a,n;return{c(){e=ee("desc"),a=q(s),this.h()},l(l){e=te(l,"desc",{id:!0});var t=M(e);a=G(t,s),t.forEach(h),this.h()},h(){v(e,"id",n=r[6].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&64&&s!==(s=l[6].desc+"")&&U(a,s),t&64&&n!==(n=l[6].id)&&v(e,"id",n)},d(l){l&&h(e)}}}function Xe(r){let e;function s(l,t){return l[3]?Qe:Ye}let a=s(r),n=a(r);return{c(){n.c(),e=R()},l(l){n.l(l),e=R()},m(l,t){n.m(l,t),I(l,e,t)},p(l,[t]){a===(a=s(l))&&n?n.p(l,t):(n.d(1),n=a(l),n&&(n.c(),n.m(e.parentNode,e)))},i:ae,o:ae,d(l){l&&h(e),n.d(l)}}}function xe(r,e,s){const a=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let n=he(e,a);const l=Be("iconCtx")??{},t={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:i=l.size||"md"}=e,{role:u=l.role||"img"}=e,{color:f=l.color||"currentColor"}=e,{withEvents:o=l.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:d=l.strokeWidth||"2"}=e,{desc:g={}}=e,m=`${_.id||""} ${g.id||""}`,c=!1,{ariaLabel:p="paper plane outline"}=e;function w(b){Q.call(this,r,b)}function E(b){Q.call(this,r,b)}function k(b){Q.call(this,r,b)}function P(b){Q.call(this,r,b)}function B(b){Q.call(this,r,b)}function C(b){Q.call(this,r,b)}function Y(b){Q.call(this,r,b)}function S(b){Q.call(this,r,b)}function N(b){Q.call(this,r,b)}return r.$$set=b=>{s(12,e=ue(ue({},e),ge(b))),s(11,n=he(e,a)),"size"in b&&s(0,i=b.size),"role"in b&&s(1,u=b.role),"color"in b&&s(2,f=b.color),"withEvents"in b&&s(3,o=b.withEvents),"title"in b&&s(4,_=b.title),"strokeWidth"in b&&s(5,d=b.strokeWidth),"desc"in b&&s(6,g=b.desc),"ariaLabel"in b&&s(7,p=b.ariaLabel)},r.$$.update=()=>{r.$$.dirty&80&&(_.id||g.id?s(8,c=!0):s(8,c=!1))},e=ge(e),[i,u,f,o,_,d,g,p,c,t,m,n,e,w,E,k,P,B,C,Y,S,N]}class et extends ne{constructor(e){super(),ie(this,e,xe,Xe,re,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function tt(r){let e,s,a,n="Send message",l;return e=new et({props:{class:"w-6 h-6 rotate-45"}}),{c(){z(e.$$.fragment),s=W(),a=H("span"),a.textContent=n,this.h()},l(t){$(e.$$.fragment,t),s=K(t),a=V(t,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(a)!=="svelte-62b3ie"&&(a.textContent=n),this.h()},h(){v(a,"class","sr-only")},m(t,i){A(e,t,i),I(t,s,i),I(t,a,i),l=!0},p:ae,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){t&&(h(s),h(a)),Z(e,t)}}}function lt(r){let e,s,a,n,l,t,i,u,f;function o(d){r[4](d)}let _={id:"chat",class:"mx-4 bg-white dark:bg-gray-800",rows:"1",placeholder:"Your message..."};return r[0]!==void 0&&(_.value=r[0]),a=new Fe({props:_}),J.push(()=>x(a,"value",o)),a.$on("keydown",r[1]),t=new Ue({props:{type:"submit",color:"blue",class:"rounded-full text-primary-600 dark:text-primary-500",$$slots:{default:[tt]},$$scope:{ctx:r}}}),{c(){e=H("form"),s=H("div"),z(a.$$.fragment),l=W(),z(t.$$.fragment),this.h()},l(d){e=V(d,"FORM",{});var g=M(e);s=V(g,"DIV",{class:!0});var m=M(s);$(a.$$.fragment,m),l=K(m),$(t.$$.fragment,m),m.forEach(h),g.forEach(h),this.h()},h(){v(s,"class","flex items-center px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700")},m(d,g){I(d,e,g),y(e,s),A(a,s,null),y(s,l),A(t,s,null),i=!0,u||(f=j(e,"submit",Se(r[2])),u=!0)},p(d,[g]){const m={};!n&&g&1&&(n=!0,m.value=d[0],X(()=>n=!1)),a.$set(m);const c={};g&32&&(c.$$scope={dirty:g,ctx:d}),t.$set(c)},i(d){i||(D(a.$$.fragment,d),D(t.$$.fragment,d),i=!0)},o(d){T(a.$$.fragment,d),T(t.$$.fragment,d),i=!1},d(d){d&&h(e),Z(a),Z(t),u=!1,f()}}}function st(r,e,s){let{message:a=""}=e,{sendMessage:n}=e,l=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),n(),s(0,a=""))};function t(){n(),s(0,a="")}function i(u){a=u,s(0,a)}return r.$$set=u=>{"message"in u&&s(0,a=u.message),"sendMessage"in u&&s(3,n=u.sendMessage)},[a,l,t,n,i]}class at extends ne{constructor(e){super(),ie(this,e,st,lt,re,{message:0,sendMessage:3})}}function rt(r){let e,s,a,n,l,t,i,u=r[0].name+"",f,o,_,d=r[0].time+"",g,m,c,p='<span id="default-message" class="inline-flex items-center"><svg class="w-3 h-3 me-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20"><path d="M16 1h-3.278A1.992 1.992 0 0 0 11 0H7a1.993 1.993 0 0 0-1.722 1H2a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2Zm-3 14H5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-4H5a1 1 0 0 1 0-2h8a1 1 0 1 1 0 2Zm0-5H5a1 1 0 0 1 0-2h2V2h4v2h2a1 1 0 1 1 0 2Z"></path></svg> <span class="text-xs font-semibold">Copy</span></span>',w,E,k,P=pe(r[0].msg)+"",B,C,Y;return{c(){e=H("div"),s=H("img"),n=W(),l=H("div"),t=H("div"),i=H("span"),f=q(u),o=W(),_=H("span"),g=q(d),m=W(),c=H("button"),c.innerHTML=p,w=W(),E=H("p"),k=new Pe(!1),this.h()},l(S){e=V(S,"DIV",{class:!0});var N=M(e);s=V(N,"IMG",{class:!0,src:!0,alt:!0}),n=K(N),l=V(N,"DIV",{class:!0});var b=M(l);t=V(b,"DIV",{class:!0});var L=M(t);i=V(L,"SPAN",{class:!0});var O=M(i);f=G(O,u),O.forEach(h),o=K(L),_=V(L,"SPAN",{class:!0});var le=M(_);g=G(le,d),le.forEach(h),m=K(L),c=V(L,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(c)!=="svelte-s2bxuc"&&(c.innerHTML=p),L.forEach(h),w=K(b),E=V(b,"P",{id:!0,class:!0,style:!0});var oe=M(E);k=ze(oe,!1),oe.forEach(h),b.forEach(h),N.forEach(h),this.h()},h(){v(s,"class","w-8 h-8 rounded-full"),$e(s.src,a="/Knowslog_logo.png")||v(s,"src",a),v(s,"alt","Knowslog"),v(i,"class","text-sm font-semibold text-gray-900 dark:text-white"),v(_,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),v(c,"class","ml-auto text-gray-900 dark:text-gray-400 m-0.5 hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-600 dark:hover:bg-gray-700 rounded-lg py-2 px-2.5 inline-flex items-center justify-center bg-white border-gray-200 border"),v(t,"class","flex items-center space-x-2 rtl:space-x-reverse"),k.a=null,v(E,"id",B=r[0].id),v(E,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white prose"),Te(E,"white-space","pre-wrap"),v(l,"class","relative flex flex-col w-auto max-w-half leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),v(e,"class","flex items-start gap-2.5")},m(S,N){I(S,e,N),y(e,s),y(e,n),y(e,l),y(l,t),y(t,i),y(i,f),y(t,o),y(t,_),y(_,g),y(t,m),y(t,c),y(l,w),y(l,E),k.m(P,E),C||(Y=j(c,"click",r[1]),C=!0)},p(S,N){N&1&&u!==(u=S[0].name+"")&&U(f,u),N&1&&d!==(d=S[0].time+"")&&U(g,d),N&1&&P!==(P=pe(S[0].msg)+"")&&k.p(P),N&1&&B!==(B=S[0].id)&&v(E,"id",B)},d(S){S&&h(e),C=!1,Y()}}}function nt(r){let e,s,a,n,l=r[0].name+"",t,i,u,f=r[0].time+"",o,_,d,g=r[0].msg+"",m,c;return{c(){e=H("div"),s=H("div"),a=H("div"),n=H("span"),t=q(l),i=W(),u=H("span"),o=q(f),_=W(),d=H("p"),m=q(g),this.h()},l(p){e=V(p,"DIV",{class:!0});var w=M(e);s=V(w,"DIV",{class:!0});var E=M(s);a=V(E,"DIV",{class:!0});var k=M(a);n=V(k,"SPAN",{class:!0});var P=M(n);t=G(P,l),P.forEach(h),i=K(k),u=V(k,"SPAN",{class:!0});var B=M(u);o=G(B,f),B.forEach(h),k.forEach(h),_=K(E),d=V(E,"P",{id:!0,class:!0,style:!0});var C=M(d);m=G(C,g),C.forEach(h),E.forEach(h),w.forEach(h),this.h()},h(){v(n,"class","text-sm font-semibold text-gray-900 dark:text-white"),v(u,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),v(a,"class","flex items-center space-x-2 rtl:space-x-reverse"),v(d,"id",c=r[0].id),v(d,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white"),Te(d,"white-space","pre-wrap"),v(s,"class","flex flex-col w-auto max-w-[320px] leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),v(e,"class","flex items-start gap-2.5 justify-end")},m(p,w){I(p,e,w),y(e,s),y(s,a),y(a,n),y(n,t),y(a,i),y(a,u),y(u,o),y(s,_),y(s,d),y(d,m)},p(p,w){w&1&&l!==(l=p[0].name+"")&&U(t,l),w&1&&f!==(f=p[0].time+"")&&U(o,f),w&1&&g!==(g=p[0].msg+"")&&U(m,g),w&1&&c!==(c=p[0].id)&&v(d,"id",c)},d(p){p&&h(e)}}}function it(r){let e;function s(l,t){return l[0].is_user?nt:rt}let a=s(r),n=a(r);return{c(){n.c(),e=R()},l(l){n.l(l),e=R()},m(l,t){n.m(l,t),I(l,e,t)},p(l,[t]){a===(a=s(l))&&n?n.p(l,t):(n.d(1),n=a(l),n&&(n.c(),n.m(e.parentNode,e)))},i:ae,o:ae,d(l){l&&h(e),n.d(l)}}}function ot(r,e,s){let{message:a={id:"1",name:"Jese",msg:"Hello, how can I help you?",time:"2024.02.20. 14:30:22",is_user:!0}}=e;function n(){const l=document.getElementById(a.id).innerText;navigator.clipboard.writeText(l).then(()=>{alert("Message copied to clipboard!")}).catch(t=>{console.error("Could not copy text: ",t)})}return r.$$set=l=>{"message"in l&&s(0,a=l.message)},[a,n]}class ut extends ne{constructor(e){super(),ie(this,e,ot,it,re,{message:0})}}async function ct(r,e,s,a){await se("stream","/chat/send_message/",r,e,s,a)}async function ft(r,e,s){await se("post","/chat/create_chat/",r,e,s)}async function _t(r,e,s){await se("get","/chat/get_chat/",r,e,s)}async function dt(r,e,s){await se("get","/chat/get_chat_list/",r,e,s)}async function mt(r,e,s){await se("get","/chat/get_userllm/",r,e,s)}async function ht(r,e,s){await se("get","/chat/get_messages/",r,e,s)}async function gt(r,e,s){await se("put","/chat/delete_chat/",r,e,s)}function ye(r,e,s){const a=r.slice();return a[12]=e[s],a[13]=e,a[14]=s,a}function Ee(r,e,s){const a=r.slice();return a[15]=e[s],a}function pt(r){let e=r[0].name+"",s,a,n;return a=new We({props:{class:"w-6 h-6 ms-2 text-primary-800 dark:text-white inline"}}),{c(){s=q(e),z(a.$$.fragment)},l(l){s=G(l,e),$(a.$$.fragment,l)},m(l,t){I(l,s,t),A(a,l,t),n=!0},p(l,t){(!n||t&1)&&e!==(e=l[0].name+"")&&U(s,e)},i(l){n||(D(a.$$.fragment,l),n=!0)},o(l){T(a.$$.fragment,l),n=!1},d(l){l&&h(s),Z(a,l)}}}function bt(r){let e=r[15].name+"",s;return{c(){s=q(e)},l(a){s=G(a,e)},m(a,n){I(a,s,n)},p(a,n){n&2&&e!==(e=a[15].name+"")&&U(s,e)},d(a){a&&h(s)}}}function Ce(r){let e,s;function a(){return r[7](r[15])}return e=new Ke({props:{$$slots:{default:[bt]},$$scope:{ctx:r}}}),e.$on("click",a),{c(){z(e.$$.fragment)},l(n){$(e.$$.fragment,n)},m(n,l){A(e,n,l),s=!0},p(n,l){r=n;const t={};l&262146&&(t.$$scope={dirty:l,ctx:r}),e.$set(t)},i(n){s||(D(e.$$.fragment,n),s=!0)},o(n){T(e.$$.fragment,n),s=!1},d(n){Z(e,n)}}}function vt(r){let e,s,a=de(r[1]),n=[];for(let t=0;t<a.length;t+=1)n[t]=Ce(Ee(r,a,t));const l=t=>T(n[t],1,1,()=>{n[t]=null});return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=R()},l(t){for(let i=0;i<n.length;i+=1)n[i].l(t);e=R()},m(t,i){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,i);I(t,e,i),s=!0},p(t,i){if(i&3){a=de(t[1]);let u;for(u=0;u<a.length;u+=1){const f=Ee(t,a,u);n[u]?(n[u].p(f,i),D(n[u],1)):(n[u]=Ce(f),n[u].c(),D(n[u],1),n[u].m(e.parentNode,e))}for(fe(),u=a.length;u<n.length;u+=1)l(u);_e()}},i(t){if(!s){for(let i=0;i<a.length;i+=1)D(n[i]);s=!0}},o(t){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)T(n[i]);s=!1},d(t){t&&h(e),He(n,t)}}}function kt(r){let e,s,a,n;return e=new Ge({props:{class:"cursor-pointer",$$slots:{default:[pt]},$$scope:{ctx:r}}}),a=new Ze({props:{class:"w-44 z-20",$$slots:{default:[vt]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment),s=W(),z(a.$$.fragment)},l(l){$(e.$$.fragment,l),s=K(l),$(a.$$.fragment,l)},m(l,t){A(e,l,t),I(l,s,t),A(a,l,t),n=!0},p(l,t){const i={};t&262145&&(i.$$scope={dirty:t,ctx:l}),e.$set(i);const u={};t&262147&&(u.$$scope={dirty:t,ctx:l}),a.$set(u)},i(l){n||(D(e.$$.fragment,l),D(a.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),T(a.$$.fragment,l),n=!1},d(l){l&&h(s),Z(e,l),Z(a,l)}}}function wt(r){let e,s,a,n;return e=new je({}),a=new qe({props:{$$slots:{default:[kt]},$$scope:{ctx:r}}}),{c(){z(e.$$.fragment),s=W(),z(a.$$.fragment)},l(l){$(e.$$.fragment,l),s=K(l),$(a.$$.fragment,l)},m(l,t){A(e,l,t),I(l,s,t),A(a,l,t),n=!0},p(l,t){const i={};t&262147&&(i.$$scope={dirty:t,ctx:l}),a.$set(i)},i(l){n||(D(e.$$.fragment,l),D(a.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),T(a.$$.fragment,l),n=!1},d(l){l&&h(s),Z(e,l),Z(a,l)}}}function De(r){let e,s,a;function n(t){r[8](t,r[12],r[13],r[14])}let l={};return r[12]!==void 0&&(l.message=r[12]),e=new ut({props:l}),J.push(()=>x(e,"message",n)),{c(){z(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,i){A(e,t,i),a=!0},p(t,i){r=t;const u={};!s&&i&4&&(s=!0,u.message=r[12],X(()=>s=!1)),e.$set(u)},i(t){a||(D(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){Z(e,t)}}}function yt(r){let e,s,a,n,l,t,i,u,f;s=new Oe({props:{rounded:!0,color:"form",$$slots:{default:[wt]},$$scope:{ctx:r}}});let o=de(r[2]),_=[];for(let c=0;c<o.length;c+=1)_[c]=De(ye(r,o,c));const d=c=>T(_[c],1,1,()=>{_[c]=null});function g(c){r[10](c)}let m={sendMessage:r[5]};return r[4]!==void 0&&(m.message=r[4]),i=new at({props:m}),J.push(()=>x(i,"message",g)),{c(){e=H("div"),z(s.$$.fragment),a=W(),n=H("div"),l=H("div");for(let c=0;c<_.length;c+=1)_[c].c();t=W(),z(i.$$.fragment),this.h()},l(c){e=V(c,"DIV",{});var p=M(e);$(s.$$.fragment,p),p.forEach(h),a=K(c),n=V(c,"DIV",{class:!0});var w=M(n);l=V(w,"DIV",{class:!0});var E=M(l);for(let k=0;k<_.length;k+=1)_[k].l(E);E.forEach(h),t=K(w),$(i.$$.fragment,w),w.forEach(h),this.h()},h(){v(l,"class","message-container svelte-12t784y"),v(n,"class","flex flex-col gap-4")},m(c,p){I(c,e,p),A(s,e,null),I(c,a,p),I(c,n,p),y(n,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(l,null);r[9](l),y(n,t),A(i,n,null),f=!0},p(c,[p]){const w={};if(p&262147&&(w.$$scope={dirty:p,ctx:c}),s.$set(w),p&4){o=de(c[2]);let k;for(k=0;k<o.length;k+=1){const P=ye(c,o,k);_[k]?(_[k].p(P,p),D(_[k],1)):(_[k]=De(P),_[k].c(),D(_[k],1),_[k].m(l,null))}for(fe(),k=o.length;k<_.length;k+=1)d(k);_e()}const E={};!u&&p&16&&(u=!0,E.message=c[4],X(()=>u=!1)),i.$set(E)},i(c){if(!f){D(s.$$.fragment,c);for(let p=0;p<o.length;p+=1)D(_[p]);D(i.$$.fragment,c),f=!0}},o(c){T(s.$$.fragment,c),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)T(_[p]);T(i.$$.fragment,c),f=!1},d(c){c&&(h(e),h(a),h(n)),Z(s),He(_,c),r[9](null),Z(i)}}}function Et(r,e,s){let{userllm_list:a=[]}=e,{chat_id:n=""}=e,{selected_userllm:l={value:0,name:"모델선택"}}=e,t=[],i="";const u=async()=>{if(i=="")return;if(l.value==0){F("error","모델을 선택해주세요.");return}let c={name:"",msg:i,time:new Date().toLocaleString(),is_user:!0},p={name:"Knowslog Bot",msg:"",time:new Date().toLocaleString(),is_user:!1};s(2,t=[...t,c]),s(2,t=[...t,p]);let w={chat_id:n,user_llm_id:l.value,input:i};await ct(w,B=>{console.log(B)},B=>{F("error",B.detail)},B=>{B.is_done?s(2,t[t.length-1].msg=B.content,t):s(2,t[t.length-1].msg+=B.content,t)})};async function f(){await ht({chat_id:n},E=>{s(2,t=E.map(k=>({name:k.name,msg:k.content,time:k.create_date,is_user:k.is_user})))},E=>{F("error",E.detail)})}let o;const _=c=>{s(0,l=c)};function d(c,p,w,E){w[E]=c,s(2,t)}function g(c){J[c?"unshift":"push"](()=>{o=c,s(3,o),s(2,t)})}function m(c){i=c,s(4,i)}return r.$$set=c=>{"userllm_list"in c&&s(1,a=c.userllm_list),"chat_id"in c&&s(6,n=c.chat_id),"selected_userllm"in c&&s(0,l=c.selected_userllm)},r.$$.update=()=>{r.$$.dirty&64&&n&&f(),r.$$.dirty&12&&t.length>0&&s(3,o.scrollTop=o.scrollHeight,o)},[l,a,t,o,i,u,n,_,d,g,m]}class Ct extends ne{constructor(e){super(),ie(this,e,Et,yt,re,{userllm_list:1,chat_id:6,selected_userllm:0})}}function Me(r){let e,s,a;function n(t){r[12](t)}let l={btn_item_more_click:r[11],btn_add_button:r[8],btn_click:r[10]};return r[0]!==void 0&&(l.side_menus=r[0]),e=new Je({props:l}),J.push(()=>x(e,"side_menus",n)),{c(){z(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,i){A(e,t,i),a=!0},p(t,i){const u={};!s&&i&1&&(s=!0,u.side_menus=t[0],X(()=>s=!1)),e.$set(u)},i(t){a||(D(e.$$.fragment,t),a=!0)},o(t){T(e.$$.fragment,t),a=!1},d(t){Z(e,t)}}}function Ie(r){let e,s,a,n,l;function t(o){r[13](o)}function i(o){r[14](o)}function u(o){r[15](o)}let f={};return r[1]!==void 0&&(f.chat_id=r[1]),r[4]!==void 0&&(f.userllm_list=r[4]),r[5]!==void 0&&(f.selected_userllm=r[5]),e=new Ct({props:f}),J.push(()=>x(e,"chat_id",t)),J.push(()=>x(e,"userllm_list",i)),J.push(()=>x(e,"selected_userllm",u)),{c(){z(e.$$.fragment)},l(o){$(e.$$.fragment,o)},m(o,_){A(e,o,_),l=!0},p(o,_){const d={};!s&&_&2&&(s=!0,d.chat_id=o[1],X(()=>s=!1)),!a&&_&16&&(a=!0,d.userllm_list=o[4],X(()=>a=!1)),!n&&_&32&&(n=!0,d.selected_userllm=o[5],X(()=>n=!1)),e.$set(d)},i(o){l||(D(e.$$.fragment,o),l=!0)},o(o){T(e.$$.fragment,o),l=!1},d(o){Z(e,o)}}}function Dt(r){let e,s,a,n,l,t,i,u,f=r[3]&&Me(r),o=r[1]&&Ie(r);function _(m){r[16](m)}function d(m){r[17](m)}let g={header:"채팅방생성",formModal:r[2],btn_click:r[9]};return r[6]!==void 0&&(g.table_head=r[6]),r[7]!==void 0&&(g.form_data=r[7]),l=new Re({props:g}),J.push(()=>x(l,"table_head",_)),J.push(()=>x(l,"form_data",d)),{c(){e=H("div"),f&&f.c(),s=W(),a=H("div"),o&&o.c(),n=W(),z(l.$$.fragment),this.h()},l(m){e=V(m,"DIV",{});var c=M(e);f&&f.l(c),c.forEach(h),s=K(m),a=V(m,"DIV",{class:!0});var p=M(a);o&&o.l(p),p.forEach(h),n=K(m),$(l.$$.fragment,m),this.h()},h(){v(a,"class","chat-container svelte-kpimbg")},m(m,c){I(m,e,c),f&&f.m(e,null),I(m,s,c),I(m,a,c),o&&o.m(a,null),I(m,n,c),A(l,m,c),u=!0},p(m,[c]){m[3]?f?(f.p(m,c),c&8&&D(f,1)):(f=Me(m),f.c(),D(f,1),f.m(e,null)):f&&(fe(),T(f,1,1,()=>{f=null}),_e()),m[1]?o?(o.p(m,c),c&2&&D(o,1)):(o=Ie(m),o.c(),D(o,1),o.m(a,null)):o&&(fe(),T(o,1,1,()=>{o=null}),_e());const p={};c&4&&(p.formModal=m[2]),!t&&c&64&&(t=!0,p.table_head=m[6],X(()=>t=!1)),!i&&c&128&&(i=!0,p.form_data=m[7],X(()=>i=!1)),l.$set(p)},i(m){u||(D(f),D(o),D(l.$$.fragment,m),u=!0)},o(m){T(f),T(o),T(l.$$.fragment,m),u=!1},d(m){m&&(h(e),h(s),h(a),h(n)),f&&f.d(),o&&o.d(),Z(l,m)}}}function Mt(r,e,s){let a=[],n="",l=!1,t=!1,i=[],u={value:0,name:"모델선택"},f=[{id:0,name:"userllm_id",type:"combo",desc:"모델선택",combo:i},{id:1,name:"title",type:"text",desc:"채팅방명"}],o={};const _=async()=>{s(2,l=!0)},d=async()=>{s(2,l=!1);let C={title:o.title,user_llm_id:o.userllm_id};await ft(C,N=>{F("info","생성 완료"),s(5,u=i.find(b=>b.value==N.user_llm_id)),s(1,n=N.id),a[0].items.push({id:N.id,label:N.title,herf:"",caption:""})},N=>{F("error",N.detail)})},g=async C=>{s(1,n=C),await _t({chat_id:C},b=>{s(5,u=i.find(L=>L.value==b.user_llm_id))},b=>{F("error",b.detail)})},m=async C=>{await gt({id:C},b=>{F("info","삭제 완료"),a.forEach(L=>{L.items=L.items.filter(O=>O.id!=C)})},b=>{F("error",b.detail)}),s(1,n="")};async function c(){let C={},Y=L=>{L.forEach(O=>{let le=a.find(oe=>oe.category===O.category);le||(le={category:O.category,items:[]},a.push(le)),le.items.push({id:O.id,label:O.title||"Untitled",herf:"",caption:O.url})}),s(3,t=!0)},S=L=>{F("error",L.detail)};await mt(C,L=>{s(4,i=L.map(O=>({value:O.id,name:O.name}))),s(6,f[0].combo=i,f)},L=>{F("error",L.detail)}),await dt(C,Y,S)}Ae(async()=>{await c()});function p(C){a=C,s(0,a)}function w(C){n=C,s(1,n)}function E(C){i=C,s(4,i)}function k(C){u=C,s(5,u)}function P(C){f=C,s(6,f)}function B(C){o=C,s(7,o)}return[a,n,l,t,i,u,f,o,_,d,g,m,p,w,E,k,P,B]}class zt extends ne{constructor(e){super(),ie(this,e,Mt,Dt,re,{})}}export{zt as component};
