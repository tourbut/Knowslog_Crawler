import{s as re,e as J,i as I,n as ae,d as g,x as ge,y as Be,w as ue,z as he,A as Y,L as ee,M as te,f as M,h as v,N as ce,j as y,r as O,K as Le,t as q,g as G,k as U,l as F,a as T,m as j,b as H,o as W,u as Se,p as X,G as Ne,a0 as $e,a1 as Pe,H as ze,Z as Te,v as He,q as Ae}from"../chunks/scheduler.ts2GzjNa.js";import{S as ne,i as ie,b as x,c as P,a as z,m as A,t as D,d as N,e as Z,g as fe,f as _e}from"../chunks/index.nwS6sPbX.js";import{e as de}from"../chunks/each.l-xqNSP_.js";import{D as Ze,C as je,a as We}from"../chunks/ChevronDownOutline.BTeucYB3.js";import{N as Ke,a as Oe,b as qe,c as Ge}from"../chunks/NavUl.DxHxPAAU.js";import{T as Ue}from"../chunks/Popper.CMXuErqe.js";import{T as Fe,m as pe,S as Je}from"../chunks/Sidebar.B5KYqgsm.js";import{t as me,g as Ve,f as se,a as Q}from"../chunks/fastapi.BWAkvZzb.js";import{C as Re}from"../chunks/Combo_Modal.nNHhSIC_.js";function Ye(r){let e,s,a,n,l,t=r[4].id&&r[4].title&&be(r),o=r[6].id&&r[6].desc&&ve(r),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=me("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":l=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],f={};for(let i=0;i<u.length;i+=1)f=ue(f,u[i]);return{c(){e=ee("svg"),t&&t.c(),s=J(),o&&o.c(),a=ee("path"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=M(e);t&&t.l(_),s=J(),o&&o.l(_),a=te(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),M(a).forEach(g),_.forEach(g),this.h()},h(){v(a,"stroke","currentColor"),v(a,"stroke-linecap","round"),v(a,"stroke-linejoin","round"),v(a,"stroke-width",r[5]),v(a,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),ce(e,f)},m(i,_){I(i,e,_),t&&t.m(e,null),y(e,s),o&&o.m(e,null),y(e,a)},p(i,_){i[4].id&&i[4].title?t?t.p(i,_):(t=be(i),t.c(),t.m(e,s)):t&&(t.d(1),t=null),i[6].id&&i[6].desc?o?o.p(i,_):(o=ve(i),o.c(),o.m(e,a)):o&&(o.d(1),o=null),_&32&&v(a,"stroke-width",i[5]),ce(e,f=Ve(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:i[2]},_&2048&&i[11],_&4097&&n!==(n=me("shrink-0",i[9][i[0]??"md"],i[12].class))&&{class:n},_&2&&{role:i[1]},_&128&&{"aria-label":i[7]},_&256&&l!==(l=i[8]?i[10]:void 0)&&{"aria-describedby":l},{viewBox:"0 0 24 24"}]))},d(i){i&&g(e),t&&t.d(),o&&o.d()}}}function Qe(r){let e,s,a,n,l,t,o,u=r[4].id&&r[4].title&&ke(r),f=r[6].id&&r[6].desc&&we(r),i=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=me("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":l=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let d=0;d<i.length;d+=1)_=ue(_,i[d]);return{c(){e=ee("svg"),u&&u.c(),s=J(),f&&f.c(),a=ee("path"),this.h()},l(d){e=te(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var h=M(e);u&&u.l(h),s=J(),f&&f.l(h),a=te(h,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),M(a).forEach(g),h.forEach(g),this.h()},h(){v(a,"stroke","currentColor"),v(a,"stroke-linecap","round"),v(a,"stroke-linejoin","round"),v(a,"stroke-width",r[5]),v(a,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),ce(e,_)},m(d,h){I(d,e,h),u&&u.m(e,null),y(e,s),f&&f.m(e,null),y(e,a),t||(o=[O(e,"click",r[13]),O(e,"keydown",r[14]),O(e,"keyup",r[15]),O(e,"focus",r[16]),O(e,"blur",r[17]),O(e,"mouseenter",r[18]),O(e,"mouseleave",r[19]),O(e,"mouseover",r[20]),O(e,"mouseout",r[21])],t=!0)},p(d,h){d[4].id&&d[4].title?u?u.p(d,h):(u=ke(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null),d[6].id&&d[6].desc?f?f.p(d,h):(f=we(d),f.c(),f.m(e,a)):f&&(f.d(1),f=null),h&32&&v(a,"stroke-width",d[5]),ce(e,_=Ve(i,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},h&4&&{color:d[2]},h&2048&&d[11],h&4097&&n!==(n=me("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:n},h&2&&{role:d[1]},h&128&&{"aria-label":d[7]},h&256&&l!==(l=d[8]?d[10]:void 0)&&{"aria-describedby":l},{viewBox:"0 0 24 24"}]))},d(d){d&&g(e),u&&u.d(),f&&f.d(),t=!1,Le(o)}}}function be(r){let e,s=r[4].title+"",a,n;return{c(){e=ee("title"),a=q(s),this.h()},l(l){e=te(l,"title",{id:!0});var t=M(e);a=G(t,s),t.forEach(g),this.h()},h(){v(e,"id",n=r[4].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&16&&s!==(s=l[4].title+"")&&U(a,s),t&16&&n!==(n=l[4].id)&&v(e,"id",n)},d(l){l&&g(e)}}}function ve(r){let e,s=r[6].desc+"",a,n;return{c(){e=ee("desc"),a=q(s),this.h()},l(l){e=te(l,"desc",{id:!0});var t=M(e);a=G(t,s),t.forEach(g),this.h()},h(){v(e,"id",n=r[6].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&64&&s!==(s=l[6].desc+"")&&U(a,s),t&64&&n!==(n=l[6].id)&&v(e,"id",n)},d(l){l&&g(e)}}}function ke(r){let e,s=r[4].title+"",a,n;return{c(){e=ee("title"),a=q(s),this.h()},l(l){e=te(l,"title",{id:!0});var t=M(e);a=G(t,s),t.forEach(g),this.h()},h(){v(e,"id",n=r[4].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&16&&s!==(s=l[4].title+"")&&U(a,s),t&16&&n!==(n=l[4].id)&&v(e,"id",n)},d(l){l&&g(e)}}}function we(r){let e,s=r[6].desc+"",a,n;return{c(){e=ee("desc"),a=q(s),this.h()},l(l){e=te(l,"desc",{id:!0});var t=M(e);a=G(t,s),t.forEach(g),this.h()},h(){v(e,"id",n=r[6].id)},m(l,t){I(l,e,t),y(e,a)},p(l,t){t&64&&s!==(s=l[6].desc+"")&&U(a,s),t&64&&n!==(n=l[6].id)&&v(e,"id",n)},d(l){l&&g(e)}}}function Xe(r){let e;function s(l,t){return l[3]?Qe:Ye}let a=s(r),n=a(r);return{c(){n.c(),e=J()},l(l){n.l(l),e=J()},m(l,t){n.m(l,t),I(l,e,t)},p(l,[t]){a===(a=s(l))&&n?n.p(l,t):(n.d(1),n=a(l),n&&(n.c(),n.m(e.parentNode,e)))},i:ae,o:ae,d(l){l&&g(e),n.d(l)}}}function xe(r,e,s){const a=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let n=ge(e,a);const l=Be("iconCtx")??{},t={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=l.size||"md"}=e,{role:u=l.role||"img"}=e,{color:f=l.color||"currentColor"}=e,{withEvents:i=l.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:d=l.strokeWidth||"2"}=e,{desc:h={}}=e,m=`${_.id||""} ${h.id||""}`,c=!1,{ariaLabel:p="paper plane outline"}=e;function w(b){Y.call(this,r,b)}function E(b){Y.call(this,r,b)}function k(b){Y.call(this,r,b)}function $(b){Y.call(this,r,b)}function B(b){Y.call(this,r,b)}function C(b){Y.call(this,r,b)}function R(b){Y.call(this,r,b)}function S(b){Y.call(this,r,b)}function V(b){Y.call(this,r,b)}return r.$$set=b=>{s(12,e=ue(ue({},e),he(b))),s(11,n=ge(e,a)),"size"in b&&s(0,o=b.size),"role"in b&&s(1,u=b.role),"color"in b&&s(2,f=b.color),"withEvents"in b&&s(3,i=b.withEvents),"title"in b&&s(4,_=b.title),"strokeWidth"in b&&s(5,d=b.strokeWidth),"desc"in b&&s(6,h=b.desc),"ariaLabel"in b&&s(7,p=b.ariaLabel)},r.$$.update=()=>{r.$$.dirty&80&&(_.id||h.id?s(8,c=!0):s(8,c=!1))},e=he(e),[o,u,f,i,_,d,h,p,c,t,m,n,e,w,E,k,$,B,C,R,S,V]}class et extends ne{constructor(e){super(),ie(this,e,xe,Xe,re,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function tt(r){let e,s,a,n="Send message",l;return e=new et({props:{class:"w-6 h-6 rotate-45"}}),{c(){P(e.$$.fragment),s=j(),a=T("span"),a.textContent=n,this.h()},l(t){z(e.$$.fragment,t),s=W(t),a=H(t,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(a)!=="svelte-62b3ie"&&(a.textContent=n),this.h()},h(){v(a,"class","sr-only")},m(t,o){A(e,t,o),I(t,s,o),I(t,a,o),l=!0},p:ae,i(t){l||(D(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){t&&(g(s),g(a)),Z(e,t)}}}function lt(r){let e,s,a,n,l,t,o,u,f;function i(d){r[4](d)}let _={id:"chat",class:"mx-4 bg-white dark:bg-gray-800",rows:"1",placeholder:"Your message..."};return r[0]!==void 0&&(_.value=r[0]),a=new Fe({props:_}),F.push(()=>x(a,"value",i)),a.$on("keydown",r[1]),t=new Ue({props:{type:"submit",color:"blue",class:"rounded-full text-primary-600 dark:text-primary-500",$$slots:{default:[tt]},$$scope:{ctx:r}}}),{c(){e=T("form"),s=T("div"),P(a.$$.fragment),l=j(),P(t.$$.fragment),this.h()},l(d){e=H(d,"FORM",{});var h=M(e);s=H(h,"DIV",{class:!0});var m=M(s);z(a.$$.fragment,m),l=W(m),z(t.$$.fragment,m),m.forEach(g),h.forEach(g),this.h()},h(){v(s,"class","flex items-center px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700")},m(d,h){I(d,e,h),y(e,s),A(a,s,null),y(s,l),A(t,s,null),o=!0,u||(f=O(e,"submit",Se(r[2])),u=!0)},p(d,[h]){const m={};!n&&h&1&&(n=!0,m.value=d[0],X(()=>n=!1)),a.$set(m);const c={};h&32&&(c.$$scope={dirty:h,ctx:d}),t.$set(c)},i(d){o||(D(a.$$.fragment,d),D(t.$$.fragment,d),o=!0)},o(d){N(a.$$.fragment,d),N(t.$$.fragment,d),o=!1},d(d){d&&g(e),Z(a),Z(t),u=!1,f()}}}function st(r,e,s){let{message:a=""}=e,{sendMessage:n}=e,l=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),n(),s(0,a=""))};function t(){n(),s(0,a="")}function o(u){a=u,s(0,a)}return r.$$set=u=>{"message"in u&&s(0,a=u.message),"sendMessage"in u&&s(3,n=u.sendMessage)},[a,l,t,n,o]}class at extends ne{constructor(e){super(),ie(this,e,st,lt,re,{message:0,sendMessage:3})}}function rt(r){let e,s,a,n,l,t,o,u=r[0].name+"",f,i,_,d=r[0].time+"",h,m,c,p='<span id="default-message" class="inline-flex items-center"><svg class="w-3 h-3 me-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20"><path d="M16 1h-3.278A1.992 1.992 0 0 0 11 0H7a1.993 1.993 0 0 0-1.722 1H2a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2Zm-3 14H5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-4H5a1 1 0 0 1 0-2h8a1 1 0 1 1 0 2Zm0-5H5a1 1 0 0 1 0-2h2V2h4v2h2a1 1 0 1 1 0 2Z"></path></svg> <span class="text-xs font-semibold">Copy</span></span>',w,E,k,$=pe(r[0].msg)+"",B,C,R;return{c(){e=T("div"),s=T("img"),n=j(),l=T("div"),t=T("div"),o=T("span"),f=q(u),i=j(),_=T("span"),h=q(d),m=j(),c=T("button"),c.innerHTML=p,w=j(),E=T("p"),k=new $e(!1),this.h()},l(S){e=H(S,"DIV",{class:!0});var V=M(e);s=H(V,"IMG",{class:!0,src:!0,alt:!0}),n=W(V),l=H(V,"DIV",{class:!0});var b=M(l);t=H(b,"DIV",{class:!0});var L=M(t);o=H(L,"SPAN",{class:!0});var K=M(o);f=G(K,u),K.forEach(g),i=W(L),_=H(L,"SPAN",{class:!0});var le=M(_);h=G(le,d),le.forEach(g),m=W(L),c=H(L,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(c)!=="svelte-s2bxuc"&&(c.innerHTML=p),L.forEach(g),w=W(b),E=H(b,"P",{id:!0,class:!0,style:!0});var oe=M(E);k=Pe(oe,!1),oe.forEach(g),b.forEach(g),V.forEach(g),this.h()},h(){v(s,"class","w-8 h-8 rounded-full"),ze(s.src,a="/Knowslog_logo.png")||v(s,"src",a),v(s,"alt","Knowslog"),v(o,"class","text-sm font-semibold text-gray-900 dark:text-white"),v(_,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),v(c,"class","ml-auto text-gray-900 dark:text-gray-400 m-0.5 hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-600 dark:hover:bg-gray-700 rounded-lg py-2 px-2.5 inline-flex items-center justify-center bg-white border-gray-200 border"),v(t,"class","flex items-center space-x-2 rtl:space-x-reverse"),k.a=null,v(E,"id",B=r[0].id),v(E,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white prose"),Te(E,"white-space","pre-wrap"),v(l,"class","relative flex flex-col w-auto max-w-half leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),v(e,"class","flex items-start gap-2.5")},m(S,V){I(S,e,V),y(e,s),y(e,n),y(e,l),y(l,t),y(t,o),y(o,f),y(t,i),y(t,_),y(_,h),y(t,m),y(t,c),y(l,w),y(l,E),k.m($,E),C||(R=O(c,"click",r[1]),C=!0)},p(S,V){V&1&&u!==(u=S[0].name+"")&&U(f,u),V&1&&d!==(d=S[0].time+"")&&U(h,d),V&1&&$!==($=pe(S[0].msg)+"")&&k.p($),V&1&&B!==(B=S[0].id)&&v(E,"id",B)},d(S){S&&g(e),C=!1,R()}}}function nt(r){let e,s,a,n,l=r[0].name+"",t,o,u,f=r[0].time+"",i,_,d,h=r[0].msg+"",m,c;return{c(){e=T("div"),s=T("div"),a=T("div"),n=T("span"),t=q(l),o=j(),u=T("span"),i=q(f),_=j(),d=T("p"),m=q(h),this.h()},l(p){e=H(p,"DIV",{class:!0});var w=M(e);s=H(w,"DIV",{class:!0});var E=M(s);a=H(E,"DIV",{class:!0});var k=M(a);n=H(k,"SPAN",{class:!0});var $=M(n);t=G($,l),$.forEach(g),o=W(k),u=H(k,"SPAN",{class:!0});var B=M(u);i=G(B,f),B.forEach(g),k.forEach(g),_=W(E),d=H(E,"P",{id:!0,class:!0,style:!0});var C=M(d);m=G(C,h),C.forEach(g),E.forEach(g),w.forEach(g),this.h()},h(){v(n,"class","text-sm font-semibold text-gray-900 dark:text-white"),v(u,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),v(a,"class","flex items-center space-x-2 rtl:space-x-reverse"),v(d,"id",c=r[0].id),v(d,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white"),Te(d,"white-space","pre-wrap"),v(s,"class","flex flex-col w-auto max-w-[320px] leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),v(e,"class","flex items-start gap-2.5 justify-end")},m(p,w){I(p,e,w),y(e,s),y(s,a),y(a,n),y(n,t),y(a,o),y(a,u),y(u,i),y(s,_),y(s,d),y(d,m)},p(p,w){w&1&&l!==(l=p[0].name+"")&&U(t,l),w&1&&f!==(f=p[0].time+"")&&U(i,f),w&1&&h!==(h=p[0].msg+"")&&U(m,h),w&1&&c!==(c=p[0].id)&&v(d,"id",c)},d(p){p&&g(e)}}}function it(r){let e;function s(l,t){return l[0].is_user?nt:rt}let a=s(r),n=a(r);return{c(){n.c(),e=J()},l(l){n.l(l),e=J()},m(l,t){n.m(l,t),I(l,e,t)},p(l,[t]){a===(a=s(l))&&n?n.p(l,t):(n.d(1),n=a(l),n&&(n.c(),n.m(e.parentNode,e)))},i:ae,o:ae,d(l){l&&g(e),n.d(l)}}}function ot(r,e,s){let{message:a={id:"1",name:"Jese",msg:"Hello, how can I help you?",time:"2024.02.20. 14:30:22",is_user:!0}}=e;function n(){const l=document.getElementById(a.id).innerText;navigator.clipboard.writeText(l).then(()=>{alert("Message copied to clipboard!")}).catch(t=>{console.error("Could not copy text: ",t)})}return r.$$set=l=>{"message"in l&&s(0,a=l.message)},[a,n]}class ut extends ne{constructor(e){super(),ie(this,e,ot,it,re,{message:0})}}async function ct(r,e,s,a){await se("stream","/chat/send_message/",r,e,s,a)}async function ft(r,e,s){await se("post","/chat/create_chat/",r,e,s)}async function _t(r,e,s){await se("get","/chat/get_chat/",r,e,s)}async function dt(r,e,s){await se("get","/chat/get_chat_list/",r,e,s)}async function mt(r,e,s){await se("get","/chat/get_userllm/",r,e,s)}async function gt(r,e,s){await se("get","/chat/get_messages/",r,e,s)}async function ht(r,e,s){await se("put","/chat/delete_chat/",r,e,s)}function ye(r,e,s){const a=r.slice();return a[12]=e[s],a[13]=e,a[14]=s,a}function Ee(r,e,s){const a=r.slice();return a[15]=e[s],a}function pt(r){let e=r[0].name+"",s,a,n;return a=new je({props:{class:"w-6 h-6 ms-2 text-primary-800 dark:text-white inline"}}),{c(){s=q(e),P(a.$$.fragment)},l(l){s=G(l,e),z(a.$$.fragment,l)},m(l,t){I(l,s,t),A(a,l,t),n=!0},p(l,t){(!n||t&1)&&e!==(e=l[0].name+"")&&U(s,e)},i(l){n||(D(a.$$.fragment,l),n=!0)},o(l){N(a.$$.fragment,l),n=!1},d(l){l&&g(s),Z(a,l)}}}function bt(r){let e=r[15].name+"",s;return{c(){s=q(e)},l(a){s=G(a,e)},m(a,n){I(a,s,n)},p(a,n){n&2&&e!==(e=a[15].name+"")&&U(s,e)},d(a){a&&g(s)}}}function Ce(r){let e,s;function a(){return r[7](r[15])}return e=new We({props:{$$slots:{default:[bt]},$$scope:{ctx:r}}}),e.$on("click",a),{c(){P(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,l){A(e,n,l),s=!0},p(n,l){r=n;const t={};l&262146&&(t.$$scope={dirty:l,ctx:r}),e.$set(t)},i(n){s||(D(e.$$.fragment,n),s=!0)},o(n){N(e.$$.fragment,n),s=!1},d(n){Z(e,n)}}}function vt(r){let e,s,a=de(r[1]),n=[];for(let t=0;t<a.length;t+=1)n[t]=Ce(Ee(r,a,t));const l=t=>N(n[t],1,1,()=>{n[t]=null});return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=J()},l(t){for(let o=0;o<n.length;o+=1)n[o].l(t);e=J()},m(t,o){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,o);I(t,e,o),s=!0},p(t,o){if(o&3){a=de(t[1]);let u;for(u=0;u<a.length;u+=1){const f=Ee(t,a,u);n[u]?(n[u].p(f,o),D(n[u],1)):(n[u]=Ce(f),n[u].c(),D(n[u],1),n[u].m(e.parentNode,e))}for(fe(),u=a.length;u<n.length;u+=1)l(u);_e()}},i(t){if(!s){for(let o=0;o<a.length;o+=1)D(n[o]);s=!0}},o(t){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)N(n[o]);s=!1},d(t){t&&g(e),He(n,t)}}}function kt(r){let e,s,a,n;return e=new Ge({props:{class:"cursor-pointer",$$slots:{default:[pt]},$$scope:{ctx:r}}}),a=new Ze({props:{class:"w-44 z-20",$$slots:{default:[vt]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),s=j(),P(a.$$.fragment)},l(l){z(e.$$.fragment,l),s=W(l),z(a.$$.fragment,l)},m(l,t){A(e,l,t),I(l,s,t),A(a,l,t),n=!0},p(l,t){const o={};t&262145&&(o.$$scope={dirty:t,ctx:l}),e.$set(o);const u={};t&262147&&(u.$$scope={dirty:t,ctx:l}),a.$set(u)},i(l){n||(D(e.$$.fragment,l),D(a.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),N(a.$$.fragment,l),n=!1},d(l){l&&g(s),Z(e,l),Z(a,l)}}}function wt(r){let e,s,a,n;return e=new Oe({}),a=new qe({props:{$$slots:{default:[kt]},$$scope:{ctx:r}}}),{c(){P(e.$$.fragment),s=j(),P(a.$$.fragment)},l(l){z(e.$$.fragment,l),s=W(l),z(a.$$.fragment,l)},m(l,t){A(e,l,t),I(l,s,t),A(a,l,t),n=!0},p(l,t){const o={};t&262147&&(o.$$scope={dirty:t,ctx:l}),a.$set(o)},i(l){n||(D(e.$$.fragment,l),D(a.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),N(a.$$.fragment,l),n=!1},d(l){l&&g(s),Z(e,l),Z(a,l)}}}function De(r){let e,s,a;function n(t){r[8](t,r[12],r[13],r[14])}let l={};return r[12]!==void 0&&(l.message=r[12]),e=new ut({props:l}),F.push(()=>x(e,"message",n)),{c(){P(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,o){A(e,t,o),a=!0},p(t,o){r=t;const u={};!s&&o&4&&(s=!0,u.message=r[12],X(()=>s=!1)),e.$set(u)},i(t){a||(D(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){Z(e,t)}}}function yt(r){let e,s,a,n,l,t,o,u,f;s=new Ke({props:{rounded:!0,color:"form",$$slots:{default:[wt]},$$scope:{ctx:r}}});let i=de(r[2]),_=[];for(let c=0;c<i.length;c+=1)_[c]=De(ye(r,i,c));const d=c=>N(_[c],1,1,()=>{_[c]=null});function h(c){r[10](c)}let m={sendMessage:r[5]};return r[4]!==void 0&&(m.message=r[4]),o=new at({props:m}),F.push(()=>x(o,"message",h)),{c(){e=T("div"),P(s.$$.fragment),a=j(),n=T("div"),l=T("div");for(let c=0;c<_.length;c+=1)_[c].c();t=j(),P(o.$$.fragment),this.h()},l(c){e=H(c,"DIV",{});var p=M(e);z(s.$$.fragment,p),p.forEach(g),a=W(c),n=H(c,"DIV",{class:!0});var w=M(n);l=H(w,"DIV",{class:!0});var E=M(l);for(let k=0;k<_.length;k+=1)_[k].l(E);E.forEach(g),t=W(w),z(o.$$.fragment,w),w.forEach(g),this.h()},h(){v(l,"class","message-container svelte-12t784y"),v(n,"class","flex flex-col gap-4")},m(c,p){I(c,e,p),A(s,e,null),I(c,a,p),I(c,n,p),y(n,l);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(l,null);r[9](l),y(n,t),A(o,n,null),f=!0},p(c,[p]){const w={};if(p&262147&&(w.$$scope={dirty:p,ctx:c}),s.$set(w),p&4){i=de(c[2]);let k;for(k=0;k<i.length;k+=1){const $=ye(c,i,k);_[k]?(_[k].p($,p),D(_[k],1)):(_[k]=De($),_[k].c(),D(_[k],1),_[k].m(l,null))}for(fe(),k=i.length;k<_.length;k+=1)d(k);_e()}const E={};!u&&p&16&&(u=!0,E.message=c[4],X(()=>u=!1)),o.$set(E)},i(c){if(!f){D(s.$$.fragment,c);for(let p=0;p<i.length;p+=1)D(_[p]);D(o.$$.fragment,c),f=!0}},o(c){N(s.$$.fragment,c),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)N(_[p]);N(o.$$.fragment,c),f=!1},d(c){c&&(g(e),g(a),g(n)),Z(s),He(_,c),r[9](null),Z(o)}}}function Et(r,e,s){let{userllm_list:a=[]}=e,{chat_id:n=""}=e,{selected_userllm:l={value:0,name:"모델선택"}}=e,t=[],o="";const u=async()=>{if(o=="")return;if(l.value==0){Q("error","모델을 선택해주세요.");return}let c={name:"",msg:o,time:new Date().toLocaleString(),is_user:!0},p={name:"Knowslog Bot",msg:"",time:new Date().toLocaleString(),is_user:!1};s(2,t=[...t,c]),s(2,t=[...t,p]);let w={chat_id:n,user_llm_id:l.value,input:o};await ct(w,B=>{console.log(B)},B=>{Q("error",B.detail)},B=>{B.is_done?s(2,t[t.length-1].msg=B.content,t):s(2,t[t.length-1].msg+=B.content,t)})};async function f(){await gt({chat_id:n},E=>{s(2,t=E.map(k=>({name:k.name,msg:k.content,time:k.create_date,is_user:k.is_user})))},E=>{Q("error",E.detail)})}let i;const _=c=>{s(0,l=c)};function d(c,p,w,E){w[E]=c,s(2,t)}function h(c){F[c?"unshift":"push"](()=>{i=c,s(3,i),s(2,t)})}function m(c){o=c,s(4,o)}return r.$$set=c=>{"userllm_list"in c&&s(1,a=c.userllm_list),"chat_id"in c&&s(6,n=c.chat_id),"selected_userllm"in c&&s(0,l=c.selected_userllm)},r.$$.update=()=>{r.$$.dirty&64&&n&&f(),r.$$.dirty&12&&t.length>0&&s(3,i.scrollTop=i.scrollHeight,i)},[l,a,t,i,o,u,n,_,d,h,m]}class Ct extends ne{constructor(e){super(),ie(this,e,Et,yt,re,{userllm_list:1,chat_id:6,selected_userllm:0})}}function Me(r){let e,s,a;function n(t){r[12](t)}let l={btn_item_more_click:r[11],btn_add_button:r[8],btn_click:r[10]};return r[0]!==void 0&&(l.side_menus=r[0]),e=new Je({props:l}),F.push(()=>x(e,"side_menus",n)),{c(){P(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,o){A(e,t,o),a=!0},p(t,o){const u={};!s&&o&1&&(s=!0,u.side_menus=t[0],X(()=>s=!1)),e.$set(u)},i(t){a||(D(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){Z(e,t)}}}function Ie(r){let e,s,a,n,l;function t(i){r[13](i)}function o(i){r[14](i)}function u(i){r[15](i)}let f={};return r[1]!==void 0&&(f.chat_id=r[1]),r[4]!==void 0&&(f.userllm_list=r[4]),r[5]!==void 0&&(f.selected_userllm=r[5]),e=new Ct({props:f}),F.push(()=>x(e,"chat_id",t)),F.push(()=>x(e,"userllm_list",o)),F.push(()=>x(e,"selected_userllm",u)),{c(){P(e.$$.fragment)},l(i){z(e.$$.fragment,i)},m(i,_){A(e,i,_),l=!0},p(i,_){const d={};!s&&_&2&&(s=!0,d.chat_id=i[1],X(()=>s=!1)),!a&&_&16&&(a=!0,d.userllm_list=i[4],X(()=>a=!1)),!n&&_&32&&(n=!0,d.selected_userllm=i[5],X(()=>n=!1)),e.$set(d)},i(i){l||(D(e.$$.fragment,i),l=!0)},o(i){N(e.$$.fragment,i),l=!1},d(i){Z(e,i)}}}function Dt(r){let e,s,a,n,l,t,o,u,f=r[3]&&Me(r),i=r[1]&&Ie(r);function _(m){r[16](m)}function d(m){r[17](m)}let h={header:"채팅방생성",formModal:r[2],btn_click:r[9]};return r[6]!==void 0&&(h.table_head=r[6]),r[7]!==void 0&&(h.form_data=r[7]),l=new Re({props:h}),F.push(()=>x(l,"table_head",_)),F.push(()=>x(l,"form_data",d)),{c(){e=T("div"),f&&f.c(),s=j(),a=T("div"),i&&i.c(),n=j(),P(l.$$.fragment),this.h()},l(m){e=H(m,"DIV",{});var c=M(e);f&&f.l(c),c.forEach(g),s=W(m),a=H(m,"DIV",{class:!0});var p=M(a);i&&i.l(p),p.forEach(g),n=W(m),z(l.$$.fragment,m),this.h()},h(){v(a,"class","chat-container svelte-kpimbg")},m(m,c){I(m,e,c),f&&f.m(e,null),I(m,s,c),I(m,a,c),i&&i.m(a,null),I(m,n,c),A(l,m,c),u=!0},p(m,[c]){m[3]?f?(f.p(m,c),c&8&&D(f,1)):(f=Me(m),f.c(),D(f,1),f.m(e,null)):f&&(fe(),N(f,1,1,()=>{f=null}),_e()),m[1]?i?(i.p(m,c),c&2&&D(i,1)):(i=Ie(m),i.c(),D(i,1),i.m(a,null)):i&&(fe(),N(i,1,1,()=>{i=null}),_e());const p={};c&4&&(p.formModal=m[2]),!t&&c&64&&(t=!0,p.table_head=m[6],X(()=>t=!1)),!o&&c&128&&(o=!0,p.form_data=m[7],X(()=>o=!1)),l.$set(p)},i(m){u||(D(f),D(i),D(l.$$.fragment,m),u=!0)},o(m){N(f),N(i),N(l.$$.fragment,m),u=!1},d(m){m&&(g(e),g(s),g(a),g(n)),f&&f.d(),i&&i.d(),Z(l,m)}}}function Mt(r,e,s){let a=[],n="",l=!1,t=!1,o=[],u={value:0,name:"모델선택"},f=[{id:0,name:"userllm_id",type:"combo",desc:"모델선택",combo:o},{id:1,name:"title",type:"text",desc:"채팅방명"}],i={};const _=async()=>{s(2,l=!0)},d=async()=>{s(2,l=!1);let C={title:i.title,user_llm_id:i.userllm_id};await ft(C,V=>{console.log(V)},V=>{Q("error",V.detail)})},h=async C=>{s(1,n=C),await _t({chat_id:C},b=>{s(5,u=o.find(L=>L.value==b.user_llm_id))},b=>{Q("error",b.detail)})},m=async C=>{await ht({id:C},b=>{Q("info","삭제 완료"),a.forEach(L=>{L.items=L.items.filter(K=>K.id!=C)})},b=>{Q("error",b.detail)}),s(1,n="")};async function c(){let C={},R=L=>{L.forEach(K=>{let le=a.find(oe=>oe.category===K.category);le||(le={category:K.category,items:[]},a.push(le)),le.items.push({id:K.id,label:K.title||"Untitled",herf:"",caption:K.url})}),s(3,t=!0)},S=L=>{Q("error",L.detail)};await mt(C,L=>{s(4,o=L.map(K=>({value:K.id,name:K.name}))),s(6,f[0].combo=o,f)},L=>{Q("error",L.detail)}),await dt(C,R,S)}Ae(async()=>{await c()});function p(C){a=C,s(0,a)}function w(C){n=C,s(1,n)}function E(C){o=C,s(4,o)}function k(C){u=C,s(5,u)}function $(C){f=C,s(6,f)}function B(C){i=C,s(7,i)}return[a,n,l,t,o,u,f,i,_,d,h,m,p,w,E,k,$,B]}class Pt extends ne{constructor(e){super(),ie(this,e,Mt,Dt,re,{})}}export{Pt as component};
