import{s as le,e as G,i as D,n as te,d as b,x as ge,y as Be,w as ne,z as he,A as U,L as J,M as R,f as $,h as k,N as ie,j as y,r as j,K as He,t as K,g as q,k as O,l as Y,a as N,m as z,b as T,o as A,u as Se,p as Q,G as Ie,a0 as Le,a1 as Pe,H as ze,Z as Ne,v as Te,q as Ae}from"../chunks/scheduler.ts2GzjNa.js";import{S as se,i as ae,b as X,c as H,a as S,m as L,t as E,d as M,e as P,g as oe,f as ue}from"../chunks/index.nwS6sPbX.js";import{e as fe}from"../chunks/each.l-xqNSP_.js";import{D as Ze,C as We,a as je}from"../chunks/ChevronDownOutline.B-tFcraN.js";import{N as Ke,a as qe,b as Oe,c as Ge}from"../chunks/NavUl.BOJjKxqZ.js";import{T as Ue}from"../chunks/Popper.AXlHcXg7.js";import{T as Fe,m as pe,S as Je}from"../chunks/Sidebar.C5aZWNDL.js";import{t as ce,g as Ve,f as re,a as x}from"../chunks/fastapi.C7duQRun.js";import{C as Re}from"../chunks/Combo_Modal.5wshjTL6.js";function Ye(r){let e,a,s,n,t,l=r[4].id&&r[4].title&&be(r),o=r[6].id&&r[6].desc&&ve(r),i=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=ce("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let u=0;u<i.length;u+=1)c=ne(c,i[u]);return{c(){e=J("svg"),l&&l.c(),a=G(),o&&o.c(),s=J("path"),this.h()},l(u){e=R(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=$(e);l&&l.l(_),a=G(),o&&o.l(_),s=R(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(s).forEach(b),_.forEach(b),this.h()},h(){k(s,"stroke","currentColor"),k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width",r[5]),k(s,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),ie(e,c)},m(u,_){D(u,e,_),l&&l.m(e,null),y(e,a),o&&o.m(e,null),y(e,s)},p(u,_){u[4].id&&u[4].title?l?l.p(u,_):(l=be(u),l.c(),l.m(e,a)):l&&(l.d(1),l=null),u[6].id&&u[6].desc?o?o.p(u,_):(o=ve(u),o.c(),o.m(e,s)):o&&(o.d(1),o=null),_&32&&k(s,"stroke-width",u[5]),ie(e,c=Ve(i,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:u[2]},_&2048&&u[11],_&4097&&n!==(n=ce("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:n},_&2&&{role:u[1]},_&128&&{"aria-label":u[7]},_&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&b(e),l&&l.d(),o&&o.d()}}}function Qe(r){let e,a,s,n,t,l,o,i=r[4].id&&r[4].title&&ke(r),c=r[6].id&&r[6].desc&&we(r),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=ce("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let d=0;d<u.length;d+=1)_=ne(_,u[d]);return{c(){e=J("svg"),i&&i.c(),a=G(),c&&c.c(),s=J("path"),this.h()},l(d){e=R(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=$(e);i&&i.l(m),a=G(),c&&c.l(m),s=R(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(s).forEach(b),m.forEach(b),this.h()},h(){k(s,"stroke","currentColor"),k(s,"stroke-linecap","round"),k(s,"stroke-linejoin","round"),k(s,"stroke-width",r[5]),k(s,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),ie(e,_)},m(d,m){D(d,e,m),i&&i.m(e,null),y(e,a),c&&c.m(e,null),y(e,s),l||(o=[j(e,"click",r[13]),j(e,"keydown",r[14]),j(e,"keyup",r[15]),j(e,"focus",r[16]),j(e,"blur",r[17]),j(e,"mouseenter",r[18]),j(e,"mouseleave",r[19]),j(e,"mouseover",r[20]),j(e,"mouseout",r[21])],l=!0)},p(d,m){d[4].id&&d[4].title?i?i.p(d,m):(i=ke(d),i.c(),i.m(e,a)):i&&(i.d(1),i=null),d[6].id&&d[6].desc?c?c.p(d,m):(c=we(d),c.c(),c.m(e,s)):c&&(c.d(1),c=null),m&32&&k(s,"stroke-width",d[5]),ie(e,_=Ve(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:d[2]},m&2048&&d[11],m&4097&&n!==(n=ce("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:n},m&2&&{role:d[1]},m&128&&{"aria-label":d[7]},m&256&&t!==(t=d[8]?d[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(d){d&&b(e),i&&i.d(),c&&c.d(),l=!1,He(o)}}}function be(r){let e,a=r[4].title+"",s,n;return{c(){e=J("title"),s=K(a),this.h()},l(t){e=R(t,"title",{id:!0});var l=$(e);s=q(l,a),l.forEach(b),this.h()},h(){k(e,"id",n=r[4].id)},m(t,l){D(t,e,l),y(e,s)},p(t,l){l&16&&a!==(a=t[4].title+"")&&O(s,a),l&16&&n!==(n=t[4].id)&&k(e,"id",n)},d(t){t&&b(e)}}}function ve(r){let e,a=r[6].desc+"",s,n;return{c(){e=J("desc"),s=K(a),this.h()},l(t){e=R(t,"desc",{id:!0});var l=$(e);s=q(l,a),l.forEach(b),this.h()},h(){k(e,"id",n=r[6].id)},m(t,l){D(t,e,l),y(e,s)},p(t,l){l&64&&a!==(a=t[6].desc+"")&&O(s,a),l&64&&n!==(n=t[6].id)&&k(e,"id",n)},d(t){t&&b(e)}}}function ke(r){let e,a=r[4].title+"",s,n;return{c(){e=J("title"),s=K(a),this.h()},l(t){e=R(t,"title",{id:!0});var l=$(e);s=q(l,a),l.forEach(b),this.h()},h(){k(e,"id",n=r[4].id)},m(t,l){D(t,e,l),y(e,s)},p(t,l){l&16&&a!==(a=t[4].title+"")&&O(s,a),l&16&&n!==(n=t[4].id)&&k(e,"id",n)},d(t){t&&b(e)}}}function we(r){let e,a=r[6].desc+"",s,n;return{c(){e=J("desc"),s=K(a),this.h()},l(t){e=R(t,"desc",{id:!0});var l=$(e);s=q(l,a),l.forEach(b),this.h()},h(){k(e,"id",n=r[6].id)},m(t,l){D(t,e,l),y(e,s)},p(t,l){l&64&&a!==(a=t[6].desc+"")&&O(s,a),l&64&&n!==(n=t[6].id)&&k(e,"id",n)},d(t){t&&b(e)}}}function Xe(r){let e;function a(t,l){return t[3]?Qe:Ye}let s=a(r),n=s(r);return{c(){n.c(),e=G()},l(t){n.l(t),e=G()},m(t,l){n.m(t,l),D(t,e,l)},p(t,[l]){s===(s=a(t))&&n?n.p(t,l):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},i:te,o:te,d(t){t&&b(e),n.d(t)}}}function xe(r,e,a){const s=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let n=ge(e,s);const t=Be("iconCtx")??{},l={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:i=t.role||"img"}=e,{color:c=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:d=t.strokeWidth||"2"}=e,{desc:m={}}=e,g=`${_.id||""} ${m.id||""}`,f=!1,{ariaLabel:p="paper plane outline"}=e;function w(v){U.call(this,r,v)}function C(v){U.call(this,r,v)}function h(v){U.call(this,r,v)}function B(v){U.call(this,r,v)}function W(v){U.call(this,r,v)}function Z(v){U.call(this,r,v)}function ee(v){U.call(this,r,v)}function V(v){U.call(this,r,v)}function I(v){U.call(this,r,v)}return r.$$set=v=>{a(12,e=ne(ne({},e),he(v))),a(11,n=ge(e,s)),"size"in v&&a(0,o=v.size),"role"in v&&a(1,i=v.role),"color"in v&&a(2,c=v.color),"withEvents"in v&&a(3,u=v.withEvents),"title"in v&&a(4,_=v.title),"strokeWidth"in v&&a(5,d=v.strokeWidth),"desc"in v&&a(6,m=v.desc),"ariaLabel"in v&&a(7,p=v.ariaLabel)},r.$$.update=()=>{r.$$.dirty&80&&(_.id||m.id?a(8,f=!0):a(8,f=!1))},e=he(e),[o,i,c,u,_,d,m,p,f,l,g,n,e,w,C,h,B,W,Z,ee,V,I]}class et extends se{constructor(e){super(),ae(this,e,xe,Xe,le,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function tt(r){let e,a,s,n="Send message",t;return e=new et({props:{class:"w-6 h-6 rotate-45"}}),{c(){H(e.$$.fragment),a=z(),s=N("span"),s.textContent=n,this.h()},l(l){S(e.$$.fragment,l),a=A(l),s=T(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(s)!=="svelte-62b3ie"&&(s.textContent=n),this.h()},h(){k(s,"class","sr-only")},m(l,o){L(e,l,o),D(l,a,o),D(l,s,o),t=!0},p:te,i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){l&&(b(a),b(s)),P(e,l)}}}function lt(r){let e,a,s,n,t,l,o,i,c;function u(d){r[4](d)}let _={id:"chat",class:"mx-4 bg-white dark:bg-gray-800",rows:"1",placeholder:"Your message..."};return r[0]!==void 0&&(_.value=r[0]),s=new Fe({props:_}),Y.push(()=>X(s,"value",u)),s.$on("keydown",r[1]),l=new Ue({props:{type:"submit",color:"blue",class:"rounded-full text-primary-600 dark:text-primary-500",$$slots:{default:[tt]},$$scope:{ctx:r}}}),{c(){e=N("form"),a=N("div"),H(s.$$.fragment),t=z(),H(l.$$.fragment),this.h()},l(d){e=T(d,"FORM",{});var m=$(e);a=T(m,"DIV",{class:!0});var g=$(a);S(s.$$.fragment,g),t=A(g),S(l.$$.fragment,g),g.forEach(b),m.forEach(b),this.h()},h(){k(a,"class","flex items-center px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700")},m(d,m){D(d,e,m),y(e,a),L(s,a,null),y(a,t),L(l,a,null),o=!0,i||(c=j(e,"submit",Se(r[2])),i=!0)},p(d,[m]){const g={};!n&&m&1&&(n=!0,g.value=d[0],Q(()=>n=!1)),s.$set(g);const f={};m&32&&(f.$$scope={dirty:m,ctx:d}),l.$set(f)},i(d){o||(E(s.$$.fragment,d),E(l.$$.fragment,d),o=!0)},o(d){M(s.$$.fragment,d),M(l.$$.fragment,d),o=!1},d(d){d&&b(e),P(s),P(l),i=!1,c()}}}function st(r,e,a){let{message:s=""}=e,{sendMessage:n}=e,t=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),n(),a(0,s=""))};function l(){n(),a(0,s="")}function o(i){s=i,a(0,s)}return r.$$set=i=>{"message"in i&&a(0,s=i.message),"sendMessage"in i&&a(3,n=i.sendMessage)},[s,t,l,n,o]}class at extends se{constructor(e){super(),ae(this,e,st,lt,le,{message:0,sendMessage:3})}}function rt(r){let e,a,s,n,t,l,o,i=r[0].name+"",c,u,_,d=r[0].time+"",m,g,f,p='<span id="default-message" class="inline-flex items-center"><svg class="w-3 h-3 me-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20"><path d="M16 1h-3.278A1.992 1.992 0 0 0 11 0H7a1.993 1.993 0 0 0-1.722 1H2a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2Zm-3 14H5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-4H5a1 1 0 0 1 0-2h8a1 1 0 1 1 0 2Zm0-5H5a1 1 0 0 1 0-2h2V2h4v2h2a1 1 0 1 1 0 2Z"></path></svg> <span class="text-xs font-semibold">Copy</span></span>',w,C,h,B=pe(r[0].msg)+"",W,Z,ee;return{c(){e=N("div"),a=N("img"),n=z(),t=N("div"),l=N("div"),o=N("span"),c=K(i),u=z(),_=N("span"),m=K(d),g=z(),f=N("button"),f.innerHTML=p,w=z(),C=N("p"),h=new Le(!1),this.h()},l(V){e=T(V,"DIV",{class:!0});var I=$(e);a=T(I,"IMG",{class:!0,src:!0,alt:!0}),n=A(I),t=T(I,"DIV",{class:!0});var v=$(t);l=T(v,"DIV",{class:!0});var F=$(l);o=T(F,"SPAN",{class:!0});var de=$(o);c=q(de,i),de.forEach(b),u=A(F),_=T(F,"SPAN",{class:!0});var _e=$(_);m=q(_e,d),_e.forEach(b),g=A(F),f=T(F,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(f)!=="svelte-s2bxuc"&&(f.innerHTML=p),F.forEach(b),w=A(v),C=T(v,"P",{id:!0,class:!0,style:!0});var me=$(C);h=Pe(me,!1),me.forEach(b),v.forEach(b),I.forEach(b),this.h()},h(){k(a,"class","w-8 h-8 rounded-full"),ze(a.src,s="/Knowslog_logo.png")||k(a,"src",s),k(a,"alt","Knowslog"),k(o,"class","text-sm font-semibold text-gray-900 dark:text-white"),k(_,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),k(f,"class","ml-auto text-gray-900 dark:text-gray-400 m-0.5 hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-600 dark:hover:bg-gray-700 rounded-lg py-2 px-2.5 inline-flex items-center justify-center bg-white border-gray-200 border"),k(l,"class","flex items-center space-x-2 rtl:space-x-reverse"),h.a=null,k(C,"id",W=r[0].id),k(C,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white prose"),Ne(C,"white-space","pre-wrap"),k(t,"class","relative flex flex-col w-auto max-w-half leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),k(e,"class","flex items-start gap-2.5")},m(V,I){D(V,e,I),y(e,a),y(e,n),y(e,t),y(t,l),y(l,o),y(o,c),y(l,u),y(l,_),y(_,m),y(l,g),y(l,f),y(t,w),y(t,C),h.m(B,C),Z||(ee=j(f,"click",r[1]),Z=!0)},p(V,I){I&1&&i!==(i=V[0].name+"")&&O(c,i),I&1&&d!==(d=V[0].time+"")&&O(m,d),I&1&&B!==(B=pe(V[0].msg)+"")&&h.p(B),I&1&&W!==(W=V[0].id)&&k(C,"id",W)},d(V){V&&b(e),Z=!1,ee()}}}function nt(r){let e,a,s,n,t=r[0].name+"",l,o,i,c=r[0].time+"",u,_,d,m=r[0].msg+"",g,f;return{c(){e=N("div"),a=N("div"),s=N("div"),n=N("span"),l=K(t),o=z(),i=N("span"),u=K(c),_=z(),d=N("p"),g=K(m),this.h()},l(p){e=T(p,"DIV",{class:!0});var w=$(e);a=T(w,"DIV",{class:!0});var C=$(a);s=T(C,"DIV",{class:!0});var h=$(s);n=T(h,"SPAN",{class:!0});var B=$(n);l=q(B,t),B.forEach(b),o=A(h),i=T(h,"SPAN",{class:!0});var W=$(i);u=q(W,c),W.forEach(b),h.forEach(b),_=A(C),d=T(C,"P",{id:!0,class:!0,style:!0});var Z=$(d);g=q(Z,m),Z.forEach(b),C.forEach(b),w.forEach(b),this.h()},h(){k(n,"class","text-sm font-semibold text-gray-900 dark:text-white"),k(i,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),k(s,"class","flex items-center space-x-2 rtl:space-x-reverse"),k(d,"id",f=r[0].id),k(d,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white"),Ne(d,"white-space","pre-wrap"),k(a,"class","flex flex-col w-auto max-w-[320px] leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),k(e,"class","flex items-start gap-2.5 justify-end")},m(p,w){D(p,e,w),y(e,a),y(a,s),y(s,n),y(n,l),y(s,o),y(s,i),y(i,u),y(a,_),y(a,d),y(d,g)},p(p,w){w&1&&t!==(t=p[0].name+"")&&O(l,t),w&1&&c!==(c=p[0].time+"")&&O(u,c),w&1&&m!==(m=p[0].msg+"")&&O(g,m),w&1&&f!==(f=p[0].id)&&k(d,"id",f)},d(p){p&&b(e)}}}function it(r){let e;function a(t,l){return t[0].is_user?nt:rt}let s=a(r),n=s(r);return{c(){n.c(),e=G()},l(t){n.l(t),e=G()},m(t,l){n.m(t,l),D(t,e,l)},p(t,[l]){s===(s=a(t))&&n?n.p(t,l):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},i:te,o:te,d(t){t&&b(e),n.d(t)}}}function ot(r,e,a){let{message:s={id:"1",name:"Jese",msg:"Hello, how can I help you?",time:"2024.02.20. 14:30:22",is_user:!0}}=e;function n(){const t=document.getElementById(s.id).innerText;navigator.clipboard.writeText(t).then(()=>{alert("Message copied to clipboard!")}).catch(l=>{console.error("Could not copy text: ",l)})}return r.$$set=t=>{"message"in t&&a(0,s=t.message)},[s,n]}class ut extends se{constructor(e){super(),ae(this,e,ot,it,le,{message:0})}}async function ft(r,e,a,s){await re("stream","/chat/send_message/",r,e,a,s)}async function ct(r,e,a){await re("post","/chat/create_chat/",r,e,a)}async function dt(r,e,a){await re("get","/chat/get_chat_list/",r,e,a)}async function _t(r,e,a){await re("get","/chat/get_userllm/",r,e,a)}async function mt(r,e,a){await re("get","/chat/get_messages/",r,e,a)}function ye(r,e,a){const s=r.slice();return s[10]=e[a],s[11]=e,s[12]=a,s}function Ee(r,e,a){const s=r.slice();return s[13]=e[a],s}function gt(r){let e=r[3].name+"",a,s,n;return s=new We({props:{class:"w-6 h-6 ms-2 text-primary-800 dark:text-white inline"}}),{c(){a=K(e),H(s.$$.fragment)},l(t){a=q(t,e),S(s.$$.fragment,t)},m(t,l){D(t,a,l),L(s,t,l),n=!0},p(t,l){(!n||l&8)&&e!==(e=t[3].name+"")&&O(a,e)},i(t){n||(E(s.$$.fragment,t),n=!0)},o(t){M(s.$$.fragment,t),n=!1},d(t){t&&b(a),P(s,t)}}}function ht(r){let e=r[13].name+"",a;return{c(){a=K(e)},l(s){a=q(s,e)},m(s,n){D(s,a,n)},p(s,n){n&1&&e!==(e=s[13].name+"")&&O(a,e)},d(s){s&&b(a)}}}function $e(r){let e,a;function s(){return r[6](r[13])}return e=new je({props:{$$slots:{default:[ht]},$$scope:{ctx:r}}}),e.$on("click",s),{c(){H(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,t){L(e,n,t),a=!0},p(n,t){r=n;const l={};t&65537&&(l.$$scope={dirty:t,ctx:r}),e.$set(l)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){P(e,n)}}}function pt(r){let e,a,s=fe(r[0]),n=[];for(let l=0;l<s.length;l+=1)n[l]=$e(Ee(r,s,l));const t=l=>M(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=G()},l(l){for(let o=0;o<n.length;o+=1)n[o].l(l);e=G()},m(l,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(l,o);D(l,e,o),a=!0},p(l,o){if(o&9){s=fe(l[0]);let i;for(i=0;i<s.length;i+=1){const c=Ee(l,s,i);n[i]?(n[i].p(c,o),E(n[i],1)):(n[i]=$e(c),n[i].c(),E(n[i],1),n[i].m(e.parentNode,e))}for(oe(),i=s.length;i<n.length;i+=1)t(i);ue()}},i(l){if(!a){for(let o=0;o<s.length;o+=1)E(n[o]);a=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)M(n[o]);a=!1},d(l){l&&b(e),Te(n,l)}}}function bt(r){let e,a,s,n;return e=new Ge({props:{class:"cursor-pointer",$$slots:{default:[gt]},$$scope:{ctx:r}}}),s=new Ze({props:{class:"w-44 z-20",$$slots:{default:[pt]},$$scope:{ctx:r}}}),{c(){H(e.$$.fragment),a=z(),H(s.$$.fragment)},l(t){S(e.$$.fragment,t),a=A(t),S(s.$$.fragment,t)},m(t,l){L(e,t,l),D(t,a,l),L(s,t,l),n=!0},p(t,l){const o={};l&65544&&(o.$$scope={dirty:l,ctx:t}),e.$set(o);const i={};l&65545&&(i.$$scope={dirty:l,ctx:t}),s.$set(i)},i(t){n||(E(e.$$.fragment,t),E(s.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),M(s.$$.fragment,t),n=!1},d(t){t&&b(a),P(e,t),P(s,t)}}}function vt(r){let e,a,s,n;return e=new qe({}),s=new Oe({props:{$$slots:{default:[bt]},$$scope:{ctx:r}}}),{c(){H(e.$$.fragment),a=z(),H(s.$$.fragment)},l(t){S(e.$$.fragment,t),a=A(t),S(s.$$.fragment,t)},m(t,l){L(e,t,l),D(t,a,l),L(s,t,l),n=!0},p(t,l){const o={};l&65545&&(o.$$scope={dirty:l,ctx:t}),s.$set(o)},i(t){n||(E(e.$$.fragment,t),E(s.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),M(s.$$.fragment,t),n=!1},d(t){t&&b(a),P(e,t),P(s,t)}}}function Ce(r){let e,a,s;function n(l){r[7](l,r[10],r[11],r[12])}let t={};return r[10]!==void 0&&(t.message=r[10]),e=new ut({props:t}),Y.push(()=>X(e,"message",n)),{c(){H(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){L(e,l,o),s=!0},p(l,o){r=l;const i={};!a&&o&2&&(a=!0,i.message=r[10],Q(()=>a=!1)),e.$set(i)},i(l){s||(E(e.$$.fragment,l),s=!0)},o(l){M(e.$$.fragment,l),s=!1},d(l){P(e,l)}}}function kt(r){let e,a,s,n,t,l,o,i,c;a=new Ke({props:{rounded:!0,color:"form",$$slots:{default:[vt]},$$scope:{ctx:r}}});let u=fe(r[1]),_=[];for(let f=0;f<u.length;f+=1)_[f]=Ce(ye(r,u,f));const d=f=>M(_[f],1,1,()=>{_[f]=null});function m(f){r[8](f)}let g={sendMessage:r[4]};return r[2]!==void 0&&(g.message=r[2]),o=new at({props:g}),Y.push(()=>X(o,"message",m)),{c(){e=N("div"),H(a.$$.fragment),s=z(),n=N("div"),t=N("div");for(let f=0;f<_.length;f+=1)_[f].c();l=z(),H(o.$$.fragment),this.h()},l(f){e=T(f,"DIV",{});var p=$(e);S(a.$$.fragment,p),p.forEach(b),s=A(f),n=T(f,"DIV",{class:!0});var w=$(n);t=T(w,"DIV",{class:!0});var C=$(t);for(let h=0;h<_.length;h+=1)_[h].l(C);C.forEach(b),l=A(w),S(o.$$.fragment,w),w.forEach(b),this.h()},h(){k(t,"class","message-container svelte-1nqke0y"),k(n,"class","flex flex-col gap-4")},m(f,p){D(f,e,p),L(a,e,null),D(f,s,p),D(f,n,p),y(n,t);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);y(n,l),L(o,n,null),c=!0},p(f,[p]){const w={};if(p&65545&&(w.$$scope={dirty:p,ctx:f}),a.$set(w),p&2){u=fe(f[1]);let h;for(h=0;h<u.length;h+=1){const B=ye(f,u,h);_[h]?(_[h].p(B,p),E(_[h],1)):(_[h]=Ce(B),_[h].c(),E(_[h],1),_[h].m(t,null))}for(oe(),h=u.length;h<_.length;h+=1)d(h);ue()}const C={};!i&&p&4&&(i=!0,C.message=f[2],Q(()=>i=!1)),o.$set(C)},i(f){if(!c){E(a.$$.fragment,f);for(let p=0;p<u.length;p+=1)E(_[p]);E(o.$$.fragment,f),c=!0}},o(f){M(a.$$.fragment,f),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)M(_[p]);M(o.$$.fragment,f),c=!1},d(f){f&&(b(e),b(s),b(n)),P(a),Te(_,f),P(o)}}}function wt(r,e,a){let{userllm_list:s=[]}=e,{chat_id:n=""}=e,t=[],l="",o={value:0,name:"모델선택"};const i=async()=>{if(l=="")return;if(o.value==0){x("error","모델을 선택해주세요.");return}let m={name:"",msg:l,time:new Date().toLocaleString(),is_user:!0},g={name:"Knowslog Bot",msg:"",time:new Date().toLocaleString(),is_user:!1};a(1,t=[...t,m]),a(1,t=[...t,g]);let f={chat_id:n,user_llm_id:o.value,input:l},p=h=>{console.log(h)},w=h=>{x("error",h.detail)},C=h=>{h.is_done?a(1,t[t.length-1].msg=h.content,t):a(1,t[t.length-1].msg+=h.content,t)};console.log(f),await ft(f,p,w,C)};async function c(){console.log(n),await mt({chat_id:n},p=>{console.log(p),a(1,t=p.map(w=>({name:w.name,msg:w.content,time:w.create_date,is_user:w.is_user})))},p=>{x("error",p.detail)})}const u=m=>{a(3,o=m)};function _(m,g,f,p){f[p]=m,a(1,t)}function d(m){l=m,a(2,l)}return r.$$set=m=>{"userllm_list"in m&&a(0,s=m.userllm_list),"chat_id"in m&&a(5,n=m.chat_id)},r.$$.update=()=>{r.$$.dirty&32&&n&&c()},[s,t,l,o,i,n,u,_,d]}class yt extends se{constructor(e){super(),ae(this,e,wt,kt,le,{userllm_list:0,chat_id:5})}}function De(r){let e,a,s;function n(l){r[10](l)}let t={btn_add_button:r[7],btn_click:r[9]};return r[0]!==void 0&&(t.side_menus=r[0]),e=new Je({props:t}),Y.push(()=>X(e,"side_menus",n)),{c(){H(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){L(e,l,o),s=!0},p(l,o){const i={};!a&&o&1&&(a=!0,i.side_menus=l[0],Q(()=>a=!1)),e.$set(i)},i(l){s||(E(e.$$.fragment,l),s=!0)},o(l){M(e.$$.fragment,l),s=!1},d(l){P(e,l)}}}function Me(r){let e,a,s,n;function t(i){r[11](i)}function l(i){r[12](i)}let o={};return r[1]!==void 0&&(o.chat_id=r[1]),r[4]!==void 0&&(o.userllm_list=r[4]),e=new yt({props:o}),Y.push(()=>X(e,"chat_id",t)),Y.push(()=>X(e,"userllm_list",l)),{c(){H(e.$$.fragment)},l(i){S(e.$$.fragment,i)},m(i,c){L(e,i,c),n=!0},p(i,c){const u={};!a&&c&2&&(a=!0,u.chat_id=i[1],Q(()=>a=!1)),!s&&c&16&&(s=!0,u.userllm_list=i[4],Q(()=>s=!1)),e.$set(u)},i(i){n||(E(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function Et(r){let e,a,s,n,t,l,o,i,c=r[3]&&De(r),u=r[1]&&Me(r);function _(g){r[13](g)}function d(g){r[14](g)}let m={header:"채팅방생성",formModal:r[2],btn_click:r[8]};return r[5]!==void 0&&(m.table_head=r[5]),r[6]!==void 0&&(m.form_data=r[6]),t=new Re({props:m}),Y.push(()=>X(t,"table_head",_)),Y.push(()=>X(t,"form_data",d)),{c(){e=N("div"),c&&c.c(),a=z(),s=N("div"),u&&u.c(),n=z(),H(t.$$.fragment),this.h()},l(g){e=T(g,"DIV",{});var f=$(e);c&&c.l(f),f.forEach(b),a=A(g),s=T(g,"DIV",{class:!0});var p=$(s);u&&u.l(p),p.forEach(b),n=A(g),S(t.$$.fragment,g),this.h()},h(){k(s,"class","chat-container svelte-1jo6skk")},m(g,f){D(g,e,f),c&&c.m(e,null),D(g,a,f),D(g,s,f),u&&u.m(s,null),D(g,n,f),L(t,g,f),i=!0},p(g,[f]){g[3]?c?(c.p(g,f),f&8&&E(c,1)):(c=De(g),c.c(),E(c,1),c.m(e,null)):c&&(oe(),M(c,1,1,()=>{c=null}),ue()),g[1]?u?(u.p(g,f),f&2&&E(u,1)):(u=Me(g),u.c(),E(u,1),u.m(s,null)):u&&(oe(),M(u,1,1,()=>{u=null}),ue());const p={};f&4&&(p.formModal=g[2]),!l&&f&32&&(l=!0,p.table_head=g[5],Q(()=>l=!1)),!o&&f&64&&(o=!0,p.form_data=g[6],Q(()=>o=!1)),t.$set(p)},i(g){i||(E(c),E(u),E(t.$$.fragment,g),i=!0)},o(g){M(c),M(u),M(t.$$.fragment,g),i=!1},d(g){g&&(b(e),b(a),b(s),b(n)),c&&c.d(),u&&u.d(),P(t,g)}}}function $t(r,e,a){let s=[],n="",t=!1,l=!1,o=[],i=[{id:0,name:"userllm_id",type:"combo",desc:"모델선택",combo:o},{id:1,name:"title",type:"text",desc:"채팅방명"}],c={};const u=async()=>{a(2,t=!0)},_=async()=>{console.log("create chat"),a(2,t=!1);let h={title:c.title,user_llm_id:c.userllm_id};await ct(h,Z=>{console.log(Z)},Z=>{x("error",Z.detail)})},d=async h=>{a(1,n=h)};async function m(){let h={},B=V=>{V.forEach(I=>{let v=s.find(F=>F.category===I.category);v||(v={category:I.category,items:[]},s.push(v)),v.items.push({id:I.id,label:I.title||"Untitled",herf:"",caption:I.url})}),a(3,l=!0)},W=V=>{x("error",V.detail)};await _t(h,V=>{a(4,o=V.map(I=>({value:I.id,name:I.name}))),a(5,i[0].combo=o,i)},V=>{x("error",V.detail)}),await dt(h,B,W)}Ae(async()=>{await m()});function g(h){s=h,a(0,s)}function f(h){n=h,a(1,n)}function p(h){o=h,a(4,o)}function w(h){i=h,a(5,i)}function C(h){c=h,a(6,c)}return[s,n,t,l,o,i,c,u,_,d,g,f,p,w,C]}class St extends se{constructor(e){super(),ae(this,e,$t,Et,le,{})}}export{St as component};
