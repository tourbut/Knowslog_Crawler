import{s as se,e as F,i as M,n as le,d as p,x as ge,y as Be,w as ie,z as he,A as J,L as Y,M as Q,f as C,h as v,N as oe,j as y,r as K,K as He,t as q,g as O,k as G,l as X,a as T,m as z,b as V,o as A,u as Se,p as x,G as Ie,a0 as Le,a1 as Pe,H as ze,Z as Ne,v as Te,q as Ae}from"../chunks/scheduler.ts2GzjNa.js";import{S as ae,i as re,b as ee,c as H,a as S,m as L,t as $,d as N,e as P,g as ue,f as fe}from"../chunks/index.nwS6sPbX.js";import{e as ce}from"../chunks/each.l-xqNSP_.js";import{D as Ze,C as je,a as We}from"../chunks/ChevronDownOutline.CrF7eS3T.js";import{N as Ke,a as qe,b as Oe,c as Ge}from"../chunks/NavUl.Dk1Jjqja.js";import{T as Ue}from"../chunks/Popper.Bax6DBiM.js";import{T as Fe,m as pe,S as Je}from"../chunks/Sidebar.CNOP0A2e.js";import{t as de,g as Ve,f as te,a as R}from"../chunks/fastapi.CI9oB8mN.js";import{C as Re}from"../chunks/Combo_Modal.gi7cz_5L.js";function Ye(r){let e,a,s,n,t,l=r[4].id&&r[4].title&&be(r),o=r[6].id&&r[6].desc&&ve(r),i=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=de("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],c={};for(let u=0;u<i.length;u+=1)c=ie(c,i[u]);return{c(){e=Y("svg"),l&&l.c(),a=F(),o&&o.c(),s=Y("path"),this.h()},l(u){e=Q(u,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var _=C(e);l&&l.l(_),a=F(),o&&o.l(_),s=Q(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(s).forEach(p),_.forEach(p),this.h()},h(){v(s,"stroke","currentColor"),v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width",r[5]),v(s,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),oe(e,c)},m(u,_){M(u,e,_),l&&l.m(e,null),y(e,a),o&&o.m(e,null),y(e,s)},p(u,_){u[4].id&&u[4].title?l?l.p(u,_):(l=be(u),l.c(),l.m(e,a)):l&&(l.d(1),l=null),u[6].id&&u[6].desc?o?o.p(u,_):(o=ve(u),o.c(),o.m(e,s)):o&&(o.d(1),o=null),_&32&&v(s,"stroke-width",u[5]),oe(e,c=Ve(i,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},_&4&&{color:u[2]},_&2048&&u[11],_&4097&&n!==(n=de("shrink-0",u[9][u[0]??"md"],u[12].class))&&{class:n},_&2&&{role:u[1]},_&128&&{"aria-label":u[7]},_&256&&t!==(t=u[8]?u[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(u){u&&p(e),l&&l.d(),o&&o.d()}}}function Qe(r){let e,a,s,n,t,l,o,i=r[4].id&&r[4].title&&ke(r),c=r[6].id&&r[6].desc&&we(r),u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},{color:r[2]},r[11],{class:n=de("shrink-0",r[9][r[0]??"md"],r[12].class)},{role:r[1]},{"aria-label":r[7]},{"aria-describedby":t=r[8]?r[10]:void 0},{viewBox:"0 0 24 24"}],_={};for(let d=0;d<u.length;d+=1)_=ie(_,u[d]);return{c(){e=Y("svg"),i&&i.c(),a=F(),c&&c.c(),s=Y("path"),this.h()},l(d){e=Q(d,"svg",{xmlns:!0,fill:!0,color:!0,class:!0,role:!0,"aria-label":!0,"aria-describedby":!0,viewBox:!0});var m=C(e);i&&i.l(m),a=F(),c&&c.l(m),s=Q(m,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(s).forEach(p),m.forEach(p),this.h()},h(){v(s,"stroke","currentColor"),v(s,"stroke-linecap","round"),v(s,"stroke-linejoin","round"),v(s,"stroke-width",r[5]),v(s,"d","m12 18-7 3 7-18 7 18-7-3Zm0 0v-5"),oe(e,_)},m(d,m){M(d,e,m),i&&i.m(e,null),y(e,a),c&&c.m(e,null),y(e,s),l||(o=[K(e,"click",r[13]),K(e,"keydown",r[14]),K(e,"keyup",r[15]),K(e,"focus",r[16]),K(e,"blur",r[17]),K(e,"mouseenter",r[18]),K(e,"mouseleave",r[19]),K(e,"mouseover",r[20]),K(e,"mouseout",r[21])],l=!0)},p(d,m){d[4].id&&d[4].title?i?i.p(d,m):(i=ke(d),i.c(),i.m(e,a)):i&&(i.d(1),i=null),d[6].id&&d[6].desc?c?c.p(d,m):(c=we(d),c.c(),c.m(e,s)):c&&(c.d(1),c=null),m&32&&v(s,"stroke-width",d[5]),oe(e,_=Ve(u,[{xmlns:"http://www.w3.org/2000/svg"},{fill:"none"},m&4&&{color:d[2]},m&2048&&d[11],m&4097&&n!==(n=de("shrink-0",d[9][d[0]??"md"],d[12].class))&&{class:n},m&2&&{role:d[1]},m&128&&{"aria-label":d[7]},m&256&&t!==(t=d[8]?d[10]:void 0)&&{"aria-describedby":t},{viewBox:"0 0 24 24"}]))},d(d){d&&p(e),i&&i.d(),c&&c.d(),l=!1,He(o)}}}function be(r){let e,a=r[4].title+"",s,n;return{c(){e=Y("title"),s=q(a),this.h()},l(t){e=Q(t,"title",{id:!0});var l=C(e);s=O(l,a),l.forEach(p),this.h()},h(){v(e,"id",n=r[4].id)},m(t,l){M(t,e,l),y(e,s)},p(t,l){l&16&&a!==(a=t[4].title+"")&&G(s,a),l&16&&n!==(n=t[4].id)&&v(e,"id",n)},d(t){t&&p(e)}}}function ve(r){let e,a=r[6].desc+"",s,n;return{c(){e=Y("desc"),s=q(a),this.h()},l(t){e=Q(t,"desc",{id:!0});var l=C(e);s=O(l,a),l.forEach(p),this.h()},h(){v(e,"id",n=r[6].id)},m(t,l){M(t,e,l),y(e,s)},p(t,l){l&64&&a!==(a=t[6].desc+"")&&G(s,a),l&64&&n!==(n=t[6].id)&&v(e,"id",n)},d(t){t&&p(e)}}}function ke(r){let e,a=r[4].title+"",s,n;return{c(){e=Y("title"),s=q(a),this.h()},l(t){e=Q(t,"title",{id:!0});var l=C(e);s=O(l,a),l.forEach(p),this.h()},h(){v(e,"id",n=r[4].id)},m(t,l){M(t,e,l),y(e,s)},p(t,l){l&16&&a!==(a=t[4].title+"")&&G(s,a),l&16&&n!==(n=t[4].id)&&v(e,"id",n)},d(t){t&&p(e)}}}function we(r){let e,a=r[6].desc+"",s,n;return{c(){e=Y("desc"),s=q(a),this.h()},l(t){e=Q(t,"desc",{id:!0});var l=C(e);s=O(l,a),l.forEach(p),this.h()},h(){v(e,"id",n=r[6].id)},m(t,l){M(t,e,l),y(e,s)},p(t,l){l&64&&a!==(a=t[6].desc+"")&&G(s,a),l&64&&n!==(n=t[6].id)&&v(e,"id",n)},d(t){t&&p(e)}}}function Xe(r){let e;function a(t,l){return t[3]?Qe:Ye}let s=a(r),n=s(r);return{c(){n.c(),e=F()},l(t){n.l(t),e=F()},m(t,l){n.m(t,l),M(t,e,l)},p(t,[l]){s===(s=a(t))&&n?n.p(t,l):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},i:le,o:le,d(t){t&&p(e),n.d(t)}}}function xe(r,e,a){const s=["size","role","color","withEvents","title","strokeWidth","desc","ariaLabel"];let n=ge(e,s);const t=Be("iconCtx")??{},l={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:o=t.size||"md"}=e,{role:i=t.role||"img"}=e,{color:c=t.color||"currentColor"}=e,{withEvents:u=t.withEvents||!1}=e,{title:_={}}=e,{strokeWidth:d=t.strokeWidth||"2"}=e,{desc:m={}}=e,g=`${_.id||""} ${m.id||""}`,f=!1,{ariaLabel:h="paper plane outline"}=e;function w(b){J.call(this,r,b)}function D(b){J.call(this,r,b)}function k(b){J.call(this,r,b)}function E(b){J.call(this,r,b)}function Z(b){J.call(this,r,b)}function j(b){J.call(this,r,b)}function U(b){J.call(this,r,b)}function B(b){J.call(this,r,b)}function I(b){J.call(this,r,b)}return r.$$set=b=>{a(12,e=ie(ie({},e),he(b))),a(11,n=ge(e,s)),"size"in b&&a(0,o=b.size),"role"in b&&a(1,i=b.role),"color"in b&&a(2,c=b.color),"withEvents"in b&&a(3,u=b.withEvents),"title"in b&&a(4,_=b.title),"strokeWidth"in b&&a(5,d=b.strokeWidth),"desc"in b&&a(6,m=b.desc),"ariaLabel"in b&&a(7,h=b.ariaLabel)},r.$$.update=()=>{r.$$.dirty&80&&(_.id||m.id?a(8,f=!0):a(8,f=!1))},e=he(e),[o,i,c,u,_,d,m,h,f,l,g,n,e,w,D,k,E,Z,j,U,B,I]}class et extends ae{constructor(e){super(),re(this,e,xe,Xe,se,{size:0,role:1,color:2,withEvents:3,title:4,strokeWidth:5,desc:6,ariaLabel:7})}}function tt(r){let e,a,s,n="Send message",t;return e=new et({props:{class:"w-6 h-6 rotate-45"}}),{c(){H(e.$$.fragment),a=z(),s=T("span"),s.textContent=n,this.h()},l(l){S(e.$$.fragment,l),a=A(l),s=V(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(s)!=="svelte-62b3ie"&&(s.textContent=n),this.h()},h(){v(s,"class","sr-only")},m(l,o){L(e,l,o),M(l,a,o),M(l,s,o),t=!0},p:le,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){l&&(p(a),p(s)),P(e,l)}}}function lt(r){let e,a,s,n,t,l,o,i,c;function u(d){r[4](d)}let _={id:"chat",class:"mx-4 bg-white dark:bg-gray-800",rows:"1",placeholder:"Your message..."};return r[0]!==void 0&&(_.value=r[0]),s=new Fe({props:_}),X.push(()=>ee(s,"value",u)),s.$on("keydown",r[1]),l=new Ue({props:{type:"submit",color:"blue",class:"rounded-full text-primary-600 dark:text-primary-500",$$slots:{default:[tt]},$$scope:{ctx:r}}}),{c(){e=T("form"),a=T("div"),H(s.$$.fragment),t=z(),H(l.$$.fragment),this.h()},l(d){e=V(d,"FORM",{});var m=C(e);a=V(m,"DIV",{class:!0});var g=C(a);S(s.$$.fragment,g),t=A(g),S(l.$$.fragment,g),g.forEach(p),m.forEach(p),this.h()},h(){v(a,"class","flex items-center px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700")},m(d,m){M(d,e,m),y(e,a),L(s,a,null),y(a,t),L(l,a,null),o=!0,i||(c=K(e,"submit",Se(r[2])),i=!0)},p(d,[m]){const g={};!n&&m&1&&(n=!0,g.value=d[0],x(()=>n=!1)),s.$set(g);const f={};m&32&&(f.$$scope={dirty:m,ctx:d}),l.$set(f)},i(d){o||($(s.$$.fragment,d),$(l.$$.fragment,d),o=!0)},o(d){N(s.$$.fragment,d),N(l.$$.fragment,d),o=!1},d(d){d&&p(e),P(s),P(l),i=!1,c()}}}function st(r,e,a){let{message:s=""}=e,{sendMessage:n}=e,t=i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),n(),a(0,s=""))};function l(){n(),a(0,s="")}function o(i){s=i,a(0,s)}return r.$$set=i=>{"message"in i&&a(0,s=i.message),"sendMessage"in i&&a(3,n=i.sendMessage)},[s,t,l,n,o]}class at extends ae{constructor(e){super(),re(this,e,st,lt,se,{message:0,sendMessage:3})}}function rt(r){let e,a,s,n,t,l,o,i=r[0].name+"",c,u,_,d=r[0].time+"",m,g,f,h='<span id="default-message" class="inline-flex items-center"><svg class="w-3 h-3 me-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20"><path d="M16 1h-3.278A1.992 1.992 0 0 0 11 0H7a1.993 1.993 0 0 0-1.722 1H2a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2Zm-3 14H5a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2Zm0-4H5a1 1 0 0 1 0-2h8a1 1 0 1 1 0 2Zm0-5H5a1 1 0 0 1 0-2h2V2h4v2h2a1 1 0 1 1 0 2Z"></path></svg> <span class="text-xs font-semibold">Copy</span></span>',w,D,k,E=pe(r[0].msg)+"",Z,j,U;return{c(){e=T("div"),a=T("img"),n=z(),t=T("div"),l=T("div"),o=T("span"),c=q(i),u=z(),_=T("span"),m=q(d),g=z(),f=T("button"),f.innerHTML=h,w=z(),D=T("p"),k=new Le(!1),this.h()},l(B){e=V(B,"DIV",{class:!0});var I=C(e);a=V(I,"IMG",{class:!0,src:!0,alt:!0}),n=A(I),t=V(I,"DIV",{class:!0});var b=C(t);l=V(b,"DIV",{class:!0});var W=C(l);o=V(W,"SPAN",{class:!0});var ne=C(o);c=O(ne,i),ne.forEach(p),u=A(W),_=V(W,"SPAN",{class:!0});var _e=C(_);m=O(_e,d),_e.forEach(p),g=A(W),f=V(W,"BUTTON",{class:!0,"data-svelte-h":!0}),Ie(f)!=="svelte-s2bxuc"&&(f.innerHTML=h),W.forEach(p),w=A(b),D=V(b,"P",{id:!0,class:!0,style:!0});var me=C(D);k=Pe(me,!1),me.forEach(p),b.forEach(p),I.forEach(p),this.h()},h(){v(a,"class","w-8 h-8 rounded-full"),ze(a.src,s="/Knowslog_logo.png")||v(a,"src",s),v(a,"alt","Knowslog"),v(o,"class","text-sm font-semibold text-gray-900 dark:text-white"),v(_,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),v(f,"class","ml-auto text-gray-900 dark:text-gray-400 m-0.5 hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-600 dark:hover:bg-gray-700 rounded-lg py-2 px-2.5 inline-flex items-center justify-center bg-white border-gray-200 border"),v(l,"class","flex items-center space-x-2 rtl:space-x-reverse"),k.a=null,v(D,"id",Z=r[0].id),v(D,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white prose"),Ne(D,"white-space","pre-wrap"),v(t,"class","relative flex flex-col w-auto max-w-half leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),v(e,"class","flex items-start gap-2.5")},m(B,I){M(B,e,I),y(e,a),y(e,n),y(e,t),y(t,l),y(l,o),y(o,c),y(l,u),y(l,_),y(_,m),y(l,g),y(l,f),y(t,w),y(t,D),k.m(E,D),j||(U=K(f,"click",r[1]),j=!0)},p(B,I){I&1&&i!==(i=B[0].name+"")&&G(c,i),I&1&&d!==(d=B[0].time+"")&&G(m,d),I&1&&E!==(E=pe(B[0].msg)+"")&&k.p(E),I&1&&Z!==(Z=B[0].id)&&v(D,"id",Z)},d(B){B&&p(e),j=!1,U()}}}function nt(r){let e,a,s,n,t=r[0].name+"",l,o,i,c=r[0].time+"",u,_,d,m=r[0].msg+"",g,f;return{c(){e=T("div"),a=T("div"),s=T("div"),n=T("span"),l=q(t),o=z(),i=T("span"),u=q(c),_=z(),d=T("p"),g=q(m),this.h()},l(h){e=V(h,"DIV",{class:!0});var w=C(e);a=V(w,"DIV",{class:!0});var D=C(a);s=V(D,"DIV",{class:!0});var k=C(s);n=V(k,"SPAN",{class:!0});var E=C(n);l=O(E,t),E.forEach(p),o=A(k),i=V(k,"SPAN",{class:!0});var Z=C(i);u=O(Z,c),Z.forEach(p),k.forEach(p),_=A(D),d=V(D,"P",{id:!0,class:!0,style:!0});var j=C(d);g=O(j,m),j.forEach(p),D.forEach(p),w.forEach(p),this.h()},h(){v(n,"class","text-sm font-semibold text-gray-900 dark:text-white"),v(i,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),v(s,"class","flex items-center space-x-2 rtl:space-x-reverse"),v(d,"id",f=r[0].id),v(d,"class","text-sm font-normal py-2.5 text-gray-900 dark:text-white"),Ne(d,"white-space","pre-wrap"),v(a,"class","flex flex-col w-auto max-w-[320px] leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl dark:bg-gray-700"),v(e,"class","flex items-start gap-2.5 justify-end")},m(h,w){M(h,e,w),y(e,a),y(a,s),y(s,n),y(n,l),y(s,o),y(s,i),y(i,u),y(a,_),y(a,d),y(d,g)},p(h,w){w&1&&t!==(t=h[0].name+"")&&G(l,t),w&1&&c!==(c=h[0].time+"")&&G(u,c),w&1&&m!==(m=h[0].msg+"")&&G(g,m),w&1&&f!==(f=h[0].id)&&v(d,"id",f)},d(h){h&&p(e)}}}function it(r){let e;function a(t,l){return t[0].is_user?nt:rt}let s=a(r),n=s(r);return{c(){n.c(),e=F()},l(t){n.l(t),e=F()},m(t,l){n.m(t,l),M(t,e,l)},p(t,[l]){s===(s=a(t))&&n?n.p(t,l):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},i:le,o:le,d(t){t&&p(e),n.d(t)}}}function ot(r,e,a){let{message:s={id:"1",name:"Jese",msg:"Hello, how can I help you?",time:"2024.02.20. 14:30:22",is_user:!0}}=e;function n(){const t=document.getElementById(s.id).innerText;navigator.clipboard.writeText(t).then(()=>{alert("Message copied to clipboard!")}).catch(l=>{console.error("Could not copy text: ",l)})}return r.$$set=t=>{"message"in t&&a(0,s=t.message)},[s,n]}class ut extends ae{constructor(e){super(),re(this,e,ot,it,se,{message:0})}}async function ft(r,e,a,s){await te("stream","/chat/send_message/",r,e,a,s)}async function ct(r,e,a){await te("post","/chat/create_chat/",r,e,a)}async function dt(r,e,a){await te("get","/chat/get_chat_list/",r,e,a)}async function _t(r,e,a){await te("get","/chat/get_userllm/",r,e,a)}async function mt(r,e,a){await te("get","/chat/get_messages/",r,e,a)}async function gt(r,e,a){await te("put","/chat/delete_chat/",r,e,a)}function ye(r,e,a){const s=r.slice();return s[10]=e[a],s[11]=e,s[12]=a,s}function Ee(r,e,a){const s=r.slice();return s[13]=e[a],s}function ht(r){let e=r[3].name+"",a,s,n;return s=new je({props:{class:"w-6 h-6 ms-2 text-primary-800 dark:text-white inline"}}),{c(){a=q(e),H(s.$$.fragment)},l(t){a=O(t,e),S(s.$$.fragment,t)},m(t,l){M(t,a,l),L(s,t,l),n=!0},p(t,l){(!n||l&8)&&e!==(e=t[3].name+"")&&G(a,e)},i(t){n||($(s.$$.fragment,t),n=!0)},o(t){N(s.$$.fragment,t),n=!1},d(t){t&&p(a),P(s,t)}}}function pt(r){let e=r[13].name+"",a;return{c(){a=q(e)},l(s){a=O(s,e)},m(s,n){M(s,a,n)},p(s,n){n&1&&e!==(e=s[13].name+"")&&G(a,e)},d(s){s&&p(a)}}}function $e(r){let e,a;function s(){return r[6](r[13])}return e=new We({props:{$$slots:{default:[pt]},$$scope:{ctx:r}}}),e.$on("click",s),{c(){H(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,t){L(e,n,t),a=!0},p(n,t){r=n;const l={};t&65537&&(l.$$scope={dirty:t,ctx:r}),e.$set(l)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){N(e.$$.fragment,n),a=!1},d(n){P(e,n)}}}function bt(r){let e,a,s=ce(r[0]),n=[];for(let l=0;l<s.length;l+=1)n[l]=$e(Ee(r,s,l));const t=l=>N(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=F()},l(l){for(let o=0;o<n.length;o+=1)n[o].l(l);e=F()},m(l,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(l,o);M(l,e,o),a=!0},p(l,o){if(o&9){s=ce(l[0]);let i;for(i=0;i<s.length;i+=1){const c=Ee(l,s,i);n[i]?(n[i].p(c,o),$(n[i],1)):(n[i]=$e(c),n[i].c(),$(n[i],1),n[i].m(e.parentNode,e))}for(ue(),i=s.length;i<n.length;i+=1)t(i);fe()}},i(l){if(!a){for(let o=0;o<s.length;o+=1)$(n[o]);a=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)N(n[o]);a=!1},d(l){l&&p(e),Te(n,l)}}}function vt(r){let e,a,s,n;return e=new Ge({props:{class:"cursor-pointer",$$slots:{default:[ht]},$$scope:{ctx:r}}}),s=new Ze({props:{class:"w-44 z-20",$$slots:{default:[bt]},$$scope:{ctx:r}}}),{c(){H(e.$$.fragment),a=z(),H(s.$$.fragment)},l(t){S(e.$$.fragment,t),a=A(t),S(s.$$.fragment,t)},m(t,l){L(e,t,l),M(t,a,l),L(s,t,l),n=!0},p(t,l){const o={};l&65544&&(o.$$scope={dirty:l,ctx:t}),e.$set(o);const i={};l&65545&&(i.$$scope={dirty:l,ctx:t}),s.$set(i)},i(t){n||($(e.$$.fragment,t),$(s.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),N(s.$$.fragment,t),n=!1},d(t){t&&p(a),P(e,t),P(s,t)}}}function kt(r){let e,a,s,n;return e=new qe({}),s=new Oe({props:{$$slots:{default:[vt]},$$scope:{ctx:r}}}),{c(){H(e.$$.fragment),a=z(),H(s.$$.fragment)},l(t){S(e.$$.fragment,t),a=A(t),S(s.$$.fragment,t)},m(t,l){L(e,t,l),M(t,a,l),L(s,t,l),n=!0},p(t,l){const o={};l&65545&&(o.$$scope={dirty:l,ctx:t}),s.$set(o)},i(t){n||($(e.$$.fragment,t),$(s.$$.fragment,t),n=!0)},o(t){N(e.$$.fragment,t),N(s.$$.fragment,t),n=!1},d(t){t&&p(a),P(e,t),P(s,t)}}}function Ce(r){let e,a,s;function n(l){r[7](l,r[10],r[11],r[12])}let t={};return r[10]!==void 0&&(t.message=r[10]),e=new ut({props:t}),X.push(()=>ee(e,"message",n)),{c(){H(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){L(e,l,o),s=!0},p(l,o){r=l;const i={};!a&&o&2&&(a=!0,i.message=r[10],x(()=>a=!1)),e.$set(i)},i(l){s||($(e.$$.fragment,l),s=!0)},o(l){N(e.$$.fragment,l),s=!1},d(l){P(e,l)}}}function wt(r){let e,a,s,n,t,l,o,i,c;a=new Ke({props:{rounded:!0,color:"form",$$slots:{default:[kt]},$$scope:{ctx:r}}});let u=ce(r[1]),_=[];for(let f=0;f<u.length;f+=1)_[f]=Ce(ye(r,u,f));const d=f=>N(_[f],1,1,()=>{_[f]=null});function m(f){r[8](f)}let g={sendMessage:r[4]};return r[2]!==void 0&&(g.message=r[2]),o=new at({props:g}),X.push(()=>ee(o,"message",m)),{c(){e=T("div"),H(a.$$.fragment),s=z(),n=T("div"),t=T("div");for(let f=0;f<_.length;f+=1)_[f].c();l=z(),H(o.$$.fragment),this.h()},l(f){e=V(f,"DIV",{});var h=C(e);S(a.$$.fragment,h),h.forEach(p),s=A(f),n=V(f,"DIV",{class:!0});var w=C(n);t=V(w,"DIV",{class:!0});var D=C(t);for(let k=0;k<_.length;k+=1)_[k].l(D);D.forEach(p),l=A(w),S(o.$$.fragment,w),w.forEach(p),this.h()},h(){v(t,"class","message-container svelte-1nqke0y"),v(n,"class","flex flex-col gap-4")},m(f,h){M(f,e,h),L(a,e,null),M(f,s,h),M(f,n,h),y(n,t);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);y(n,l),L(o,n,null),c=!0},p(f,[h]){const w={};if(h&65545&&(w.$$scope={dirty:h,ctx:f}),a.$set(w),h&2){u=ce(f[1]);let k;for(k=0;k<u.length;k+=1){const E=ye(f,u,k);_[k]?(_[k].p(E,h),$(_[k],1)):(_[k]=Ce(E),_[k].c(),$(_[k],1),_[k].m(t,null))}for(ue(),k=u.length;k<_.length;k+=1)d(k);fe()}const D={};!i&&h&4&&(i=!0,D.message=f[2],x(()=>i=!1)),o.$set(D)},i(f){if(!c){$(a.$$.fragment,f);for(let h=0;h<u.length;h+=1)$(_[h]);$(o.$$.fragment,f),c=!0}},o(f){N(a.$$.fragment,f),_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)N(_[h]);N(o.$$.fragment,f),c=!1},d(f){f&&(p(e),p(s),p(n)),P(a),Te(_,f),P(o)}}}function yt(r,e,a){let{userllm_list:s=[]}=e,{chat_id:n=""}=e,t=[],l="",o={value:0,name:"모델선택"};const i=async()=>{if(l=="")return;if(o.value==0){R("error","모델을 선택해주세요.");return}let m={name:"",msg:l,time:new Date().toLocaleString(),is_user:!0},g={name:"Knowslog Bot",msg:"",time:new Date().toLocaleString(),is_user:!1};a(1,t=[...t,m]),a(1,t=[...t,g]);let f={chat_id:n,user_llm_id:o.value,input:l},h=k=>{console.log(k)},w=k=>{R("error",k.detail)},D=k=>{k.is_done?a(1,t[t.length-1].msg=k.content,t):a(1,t[t.length-1].msg+=k.content,t)};console.log(f),await ft(f,h,w,D)};async function c(){console.log(n),await mt({chat_id:n},h=>{console.log(h),a(1,t=h.map(w=>({name:w.name,msg:w.content,time:w.create_date,is_user:w.is_user})))},h=>{R("error",h.detail)})}const u=m=>{a(3,o=m)};function _(m,g,f,h){f[h]=m,a(1,t)}function d(m){l=m,a(2,l)}return r.$$set=m=>{"userllm_list"in m&&a(0,s=m.userllm_list),"chat_id"in m&&a(5,n=m.chat_id)},r.$$.update=()=>{r.$$.dirty&32&&n&&c()},[s,t,l,o,i,n,u,_,d]}class Et extends ae{constructor(e){super(),re(this,e,yt,wt,se,{userllm_list:0,chat_id:5})}}function De(r){let e,a,s;function n(l){r[11](l)}let t={btn_item_more_click:r[10],btn_add_button:r[7],btn_click:r[9]};return r[0]!==void 0&&(t.side_menus=r[0]),e=new Je({props:t}),X.push(()=>ee(e,"side_menus",n)),{c(){H(e.$$.fragment)},l(l){S(e.$$.fragment,l)},m(l,o){L(e,l,o),s=!0},p(l,o){const i={};!a&&o&1&&(a=!0,i.side_menus=l[0],x(()=>a=!1)),e.$set(i)},i(l){s||($(e.$$.fragment,l),s=!0)},o(l){N(e.$$.fragment,l),s=!1},d(l){P(e,l)}}}function Me(r){let e,a,s,n;function t(i){r[12](i)}function l(i){r[13](i)}let o={};return r[1]!==void 0&&(o.chat_id=r[1]),r[4]!==void 0&&(o.userllm_list=r[4]),e=new Et({props:o}),X.push(()=>ee(e,"chat_id",t)),X.push(()=>ee(e,"userllm_list",l)),{c(){H(e.$$.fragment)},l(i){S(e.$$.fragment,i)},m(i,c){L(e,i,c),n=!0},p(i,c){const u={};!a&&c&2&&(a=!0,u.chat_id=i[1],x(()=>a=!1)),!s&&c&16&&(s=!0,u.userllm_list=i[4],x(()=>s=!1)),e.$set(u)},i(i){n||($(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){P(e,i)}}}function $t(r){let e,a,s,n,t,l,o,i,c=r[3]&&De(r),u=r[1]&&Me(r);function _(g){r[14](g)}function d(g){r[15](g)}let m={header:"채팅방생성",formModal:r[2],btn_click:r[8]};return r[5]!==void 0&&(m.table_head=r[5]),r[6]!==void 0&&(m.form_data=r[6]),t=new Re({props:m}),X.push(()=>ee(t,"table_head",_)),X.push(()=>ee(t,"form_data",d)),{c(){e=T("div"),c&&c.c(),a=z(),s=T("div"),u&&u.c(),n=z(),H(t.$$.fragment),this.h()},l(g){e=V(g,"DIV",{});var f=C(e);c&&c.l(f),f.forEach(p),a=A(g),s=V(g,"DIV",{class:!0});var h=C(s);u&&u.l(h),h.forEach(p),n=A(g),S(t.$$.fragment,g),this.h()},h(){v(s,"class","chat-container svelte-1jo6skk")},m(g,f){M(g,e,f),c&&c.m(e,null),M(g,a,f),M(g,s,f),u&&u.m(s,null),M(g,n,f),L(t,g,f),i=!0},p(g,[f]){g[3]?c?(c.p(g,f),f&8&&$(c,1)):(c=De(g),c.c(),$(c,1),c.m(e,null)):c&&(ue(),N(c,1,1,()=>{c=null}),fe()),g[1]?u?(u.p(g,f),f&2&&$(u,1)):(u=Me(g),u.c(),$(u,1),u.m(s,null)):u&&(ue(),N(u,1,1,()=>{u=null}),fe());const h={};f&4&&(h.formModal=g[2]),!l&&f&32&&(l=!0,h.table_head=g[5],x(()=>l=!1)),!o&&f&64&&(o=!0,h.form_data=g[6],x(()=>o=!1)),t.$set(h)},i(g){i||($(c),$(u),$(t.$$.fragment,g),i=!0)},o(g){N(c),N(u),N(t.$$.fragment,g),i=!1},d(g){g&&(p(e),p(a),p(s),p(n)),c&&c.d(),u&&u.d(),P(t,g)}}}function Ct(r,e,a){let s=[],n="",t=!1,l=!1,o=[],i=[{id:0,name:"userllm_id",type:"combo",desc:"모델선택",combo:o},{id:1,name:"title",type:"text",desc:"채팅방명"}],c={};const u=async()=>{a(2,t=!0)},_=async()=>{console.log("create chat"),a(2,t=!1);let E={title:c.title,user_llm_id:c.userllm_id};await ct(E,U=>{console.log(U)},U=>{R("error",U.detail)})},d=async E=>{a(1,n=E)},m=async E=>{await gt({id:E},B=>{R("info","삭제 완료"),s.forEach(I=>{I.items=I.items.filter(b=>b.id!=E)})},B=>{R("error",B.detail)}),a(1,n="")};async function g(){let E={},Z=I=>{I.forEach(b=>{let W=s.find(ne=>ne.category===b.category);W||(W={category:b.category,items:[]},s.push(W)),W.items.push({id:b.id,label:b.title||"Untitled",herf:"",caption:b.url})}),a(3,l=!0)},j=I=>{R("error",I.detail)};await _t(E,I=>{a(4,o=I.map(b=>({value:b.id,name:b.name}))),a(5,i[0].combo=o,i)},I=>{R("error",I.detail)}),await dt(E,Z,j)}Ae(async()=>{await g()});function f(E){s=E,a(0,s)}function h(E){n=E,a(1,n)}function w(E){o=E,a(4,o)}function D(E){i=E,a(5,i)}function k(E){c=E,a(6,c)}return[s,n,t,l,o,i,c,u,_,d,m,f,h,w,D,k]}class Lt extends ae{constructor(e){super(),re(this,e,Ct,$t,se,{})}}export{Lt as component};
